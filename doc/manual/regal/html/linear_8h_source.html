<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Regal: src/regal/linear.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="regal.jpg"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Regal
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">src/regal/linear.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="linear_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> linear</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment"> Copyright (c) 2010 Cass Everitt</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment"> from glh -</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment"> Copyright (c) 2000-2009 Cass Everitt</span>
<a name="l00009"></a>00009 <span class="comment"> Copyright (c) 2000 NVIDIA Corporation</span>
<a name="l00010"></a>00010 <span class="comment"> All rights reserved.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment"> Redistribution and use in source and binary forms, with or</span>
<a name="l00013"></a>00013 <span class="comment"> without modification, are permitted provided that the following</span>
<a name="l00014"></a>00014 <span class="comment"> conditions are met:</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment"> * Redistributions of source code must retain the above</span>
<a name="l00017"></a>00017 <span class="comment"> copyright notice, this list of conditions and the following</span>
<a name="l00018"></a>00018 <span class="comment"> disclaimer.</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="comment"> * Redistributions in binary form must reproduce the above</span>
<a name="l00021"></a>00021 <span class="comment"> copyright notice, this list of conditions and the following</span>
<a name="l00022"></a>00022 <span class="comment"> disclaimer in the documentation and/or other materials</span>
<a name="l00023"></a>00023 <span class="comment"> provided with the distribution.</span>
<a name="l00024"></a>00024 <span class="comment"></span>
<a name="l00025"></a>00025 <span class="comment"> * The names of contributors to this software may not be used</span>
<a name="l00026"></a>00026 <span class="comment"> to endorse or promote products derived from this software</span>
<a name="l00027"></a>00027 <span class="comment"> without specific prior written permission.</span>
<a name="l00028"></a>00028 <span class="comment"></span>
<a name="l00029"></a>00029 <span class="comment"> THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00030"></a>00030 <span class="comment"> ``AS IS&#39;&#39; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00031"></a>00031 <span class="comment"> LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span>
<a name="l00032"></a>00032 <span class="comment"> FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE</span>
<a name="l00033"></a>00033 <span class="comment"> REGENTS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<a name="l00034"></a>00034 <span class="comment"> INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</span>
<a name="l00035"></a>00035 <span class="comment"> BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span>
<a name="l00036"></a>00036 <span class="comment"> LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00037"></a>00037 <span class="comment"> CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00038"></a>00038 <span class="comment"> LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN</span>
<a name="l00039"></a>00039 <span class="comment"> ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<a name="l00040"></a>00040 <span class="comment"> POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00041"></a>00041 <span class="comment"></span>
<a name="l00042"></a>00042 <span class="comment"></span>
<a name="l00043"></a>00043 <span class="comment"> Cass Everitt</span>
<a name="l00044"></a>00044 <span class="comment"> */</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">// Author:  Cass W. Everitt</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="preprocessor">#ifndef __R3_LINEAR_H__</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#define __R3_LINEAR_H__</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 <span class="comment">//#include &lt;memory.h&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <a class="code" href="RegalNamespace_8h.html#a89329e8c23a2db5b5601c6438a0b3995">REGAL_NAMESPACE_BEGIN</a>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="preprocessor">#ifdef _WIN32</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span><span class="preprocessor"># define TEMPLATE_FUNCTION</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00061"></a><a class="code" href="linear_8h.html#ae36ef7c3861a583678001cd44385cd1f">00061</a> <span class="preprocessor"></span><span class="preprocessor"># define TEMPLATE_FUNCTION &lt;&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00064"></a><a class="code" href="linear_8h.html#aae607a3a55980d8d352d11e1efcb942e">00064</a> <span class="preprocessor">#define     R3_QUATERNION_NORMALIZATION_THRESHOLD  64</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a><a class="code" href="linear_8h.html#a21f712d3c02e4719771cdd8a25ffd532">00066</a> <span class="preprocessor">#define     R3_RAD_TO_DEG      float(57.2957795130823208767981548141052)</span>
<a name="l00067"></a><a class="code" href="linear_8h.html#a45097ca8a7242770aa775d877425aec3">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define     R3_DEG_TO_RAD      float(0.0174532925199432957692369076848861)</span>
<a name="l00068"></a><a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define     R3_ZERO            float(0.0)</span>
<a name="l00069"></a><a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define     R3_ONE             float(1.0)</span>
<a name="l00070"></a><a class="code" href="linear_8h.html#a336d02ed2a436f5a770a710526325fe8">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define     R3_TWO             float(2.0)</span>
<a name="l00071"></a><a class="code" href="linear_8h.html#adbf50c4e72350fb6740ed5c3f3ca0b14">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define     R3_EPSILON         float(10e-8)</span>
<a name="l00072"></a><a class="code" href="linear_8h.html#abb0f3cdb262a767a506f28661e4d2f1d">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define     R3_PI              float(3.1415926535897932384626433832795)</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="linear_8h.html#a03484aee0fbf6e454300136c2ca9f7e1">00074</a> <span class="preprocessor">#define     r3_equivalent(a,b)     (((a &lt; b + R3_EPSILON) &amp;&amp; (a &gt; b - R3_EPSILON)) ? true : false)</span>
<a name="l00075"></a><a class="code" href="linear_8h.html#ac9bcd55b4d7251589cd80565218d265f">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define     r3_greater_than(a,b)   ( (a &gt; b - R3_EPSILON) ? true : false)</span>
<a name="l00076"></a><a class="code" href="linear_8h.html#a9edca31c92496aa90a3814f08860b671">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define     r3_less_than(a,b)      ( (a &lt; b + R3_EPSILON) ? true : false)</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="namespacer3.html">00078</a> <span class="keyword">namespace </span>r3 {
<a name="l00079"></a>00079 
<a name="l00080"></a><a class="code" href="namespacer3.html#a4469d125d238fdd1c875f314267eb168">00080</a>   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; T <a class="code" href="namespacer3.html#a4469d125d238fdd1c875f314267eb168">ToDegrees</a>(<span class="keyword">const</span> T radians) { <span class="keywordflow">return</span> radians * <a class="code" href="linear_8h.html#a21f712d3c02e4719771cdd8a25ffd532">R3_RAD_TO_DEG</a>; }
<a name="l00081"></a><a class="code" href="namespacer3.html#aac7de211930b1a3db073bf02559cc187">00081</a>   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; T <a class="code" href="namespacer3.html#aac7de211930b1a3db073bf02559cc187">ToRadians</a>(<span class="keyword">const</span> T degrees) { <span class="keywordflow">return</span> degrees * <a class="code" href="linear_8h.html#a45097ca8a7242770aa775d877425aec3">R3_DEG_TO_RAD</a>; }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; <span class="keyword">class </span>Line;
<a name="l00084"></a>00084   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; <span class="keyword">class </span>Plane;
<a name="l00085"></a>00085   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; <span class="keyword">class </span>Matrix3;
<a name="l00086"></a>00086   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; <span class="keyword">class </span>Matrix4;
<a name="l00087"></a>00087   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; <span class="keyword">class </span>Quaternion;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt;
<a name="l00090"></a><a class="code" href="structr3_1_1Vec2.html">00090</a>   <span class="keyword">struct </span><a class="code" href="structr3_1_1Vec2.html">Vec2</a>  {
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="structr3_1_1Vec2.html#acbfb178ecfcc4ee8fe666c90e5fc86a6">00092</a>     <a class="code" href="structr3_1_1Vec2.html#acbfb178ecfcc4ee8fe666c90e5fc86a6">Vec2</a>() { <a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a> = <a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a> = 0.f; }
<a name="l00093"></a><a class="code" href="structr3_1_1Vec2.html#a436b0210149fca2b78d69d66ed1eed04">00093</a>     <a class="code" href="structr3_1_1Vec2.html#a436b0210149fca2b78d69d66ed1eed04">Vec2</a>(<span class="keyword">const</span> T * tp) { <a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a> = tp[0]; <a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a> = tp[1]; }
<a name="l00094"></a>00094 
<a name="l00095"></a><a class="code" href="structr3_1_1Vec2.html#a880d076d1f151474ba173bd12e4ee3b9">00095</a>     <a class="code" href="structr3_1_1Vec2.html#a880d076d1f151474ba173bd12e4ee3b9">Vec2</a>(T <a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>, T <a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a> ) {
<a name="l00096"></a>00096       <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[0] = <a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>;
<a name="l00097"></a>00097       <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[1] = <a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a>;
<a name="l00098"></a>00098     }
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="structr3_1_1Vec2.html#ac990dea5d47a47ae87b8229a957d80f8">00100</a>     <span class="keywordtype">void</span> <a class="code" href="structr3_1_1Vec2.html#ac990dea5d47a47ae87b8229a957d80f8">GetValue</a>(T &amp; <a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>, T &amp; <a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a>)<span class="keyword"> const </span>{
<a name="l00101"></a>00101       x = <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[0]; y = <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[1];
<a name="l00102"></a>00102     }
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="structr3_1_1Vec2.html#a478a52c669c34cede6be7ec4b24b0f24">00104</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; <a class="code" href="structr3_1_1Vec2.html#a478a52c669c34cede6be7ec4b24b0f24">SetValue</a>( <span class="keyword">const</span> T &amp; <a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>, <span class="keyword">const</span> T &amp; <a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a>) {
<a name="l00105"></a>00105       <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[0] = <a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>; <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[1] = <a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">00108</a>     T <a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>, <a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a>;
<a name="l00109"></a>00109 
<a name="l00110"></a><a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">00110</a>     T * <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>() { <span class="keywordflow">return</span> &amp;<a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>; }
<a name="l00111"></a><a class="code" href="structr3_1_1Vec2.html#ae4fb100ca5beccb268755cbce45d20bd">00111</a>     <span class="keyword">const</span> T * <a class="code" href="structr3_1_1Vec2.html#ae4fb100ca5beccb268755cbce45d20bd">Ptr</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;<a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>; }
<a name="l00112"></a>00112 
<a name="l00113"></a><a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">00113</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a> = 2;
<a name="l00114"></a>00114     <span class="comment">// generic part</span>
<a name="l00115"></a>00115 
<a name="l00116"></a><a class="code" href="structr3_1_1Vec2.html#a599bd9532c6694334223d757f8239394">00116</a>     <span class="keywordtype">int</span> <a class="code" href="structr3_1_1Vec2.html#a599bd9532c6694334223d757f8239394">Size</a>()<span class="keyword"> const </span>{
<a name="l00117"></a>00117       <span class="keywordflow">return</span> <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>;
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="structr3_1_1Vec2.html#a866a80affb9fc8e244a04d90a61da672">00120</a>     <span class="keyword">const</span> T * <a class="code" href="structr3_1_1Vec2.html#a866a80affb9fc8e244a04d90a61da672">GetValue</a>()<span class="keyword"> const </span>{
<a name="l00121"></a>00121       <span class="keywordflow">return</span> <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>();
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="structr3_1_1Vec2.html#a134e9771d41900561e5d10a3195540c2">00125</a>     T <a class="code" href="structr3_1_1Vec2.html#a134e9771d41900561e5d10a3195540c2">Dot</a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; rhs )<span class="keyword"> const </span>{
<a name="l00126"></a>00126       T r = 0;
<a name="l00127"></a>00127       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) r += <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i]*rhs.<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i];
<a name="l00128"></a>00128       <span class="keywordflow">return</span> r;
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="structr3_1_1Vec2.html#a92eccf1dd491687d5e385f11ee30fdc4">00131</a>     T <a class="code" href="structr3_1_1Vec2.html#a92eccf1dd491687d5e385f11ee30fdc4">Length</a>()<span class="keyword"> const </span>{
<a name="l00132"></a>00132       T r = 0;
<a name="l00133"></a>00133       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) r += <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i]*<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i];
<a name="l00134"></a>00134       <span class="keywordflow">return</span> T(sqrt(r));
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="structr3_1_1Vec2.html#a5881b88e00eae9ceab6e2d8e240bde08">00137</a>     T <a class="code" href="structr3_1_1Vec2.html#a5881b88e00eae9ceab6e2d8e240bde08">SquareNorm</a>()<span class="keyword"> const </span>{
<a name="l00138"></a>00138       T r = 0;
<a name="l00139"></a>00139       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) r += <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i]*<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i];
<a name="l00140"></a>00140       <span class="keywordflow">return</span> r;
<a name="l00141"></a>00141     }
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="structr3_1_1Vec2.html#a975096a17ab93eff12ccc2a554af887a">00143</a>     <span class="keywordtype">void</span>  <a class="code" href="structr3_1_1Vec2.html#a975096a17ab93eff12ccc2a554af887a">Negate</a>() {
<a name="l00144"></a>00144       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] = -<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i];
<a name="l00145"></a>00145     }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="structr3_1_1Vec2.html#aacf018bb00895f00aa91958f9b639bd4">00148</a>     T <a class="code" href="structr3_1_1Vec2.html#aacf018bb00895f00aa91958f9b639bd4">Normalize</a>() {
<a name="l00149"></a>00149       T sum(0);
<a name="l00150"></a>00150       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++)
<a name="l00151"></a>00151         sum += <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i]*<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i];
<a name="l00152"></a>00152       sum = T(sqrt(sum));
<a name="l00153"></a>00153       <span class="keywordflow">if</span> (sum &gt; <a class="code" href="linear_8h.html#adbf50c4e72350fb6740ed5c3f3ca0b14">R3_EPSILON</a>)
<a name="l00154"></a>00154         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++)
<a name="l00155"></a>00155           <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] /= sum;
<a name="l00156"></a>00156       <span class="keywordflow">return</span> sum;
<a name="l00157"></a>00157     }
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="structr3_1_1Vec2.html#ae2c83a6487a9d828b428a580d545d62b">00160</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; <a class="code" href="structr3_1_1Vec2.html#ae2c83a6487a9d828b428a580d545d62b">SetValue</a>( <span class="keyword">const</span> T * rhs ) {
<a name="l00161"></a>00161       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] = rhs[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163 
<a name="l00164"></a><a class="code" href="structr3_1_1Vec2.html#a5d9fb9c76a27b644b6e188a225eb206d">00164</a>     T &amp; <a class="code" href="structr3_1_1Vec2.html#a5d9fb9c76a27b644b6e188a225eb206d">operator [] </a>( <span class="keywordtype">int</span> i ) {
<a name="l00165"></a>00165       <span class="keywordflow">return</span> <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i];
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="structr3_1_1Vec2.html#a760b33a7da43cea167a9325e6b62031f">00168</a>     <span class="keyword">const</span> T &amp; <a class="code" href="structr3_1_1Vec2.html#a5d9fb9c76a27b644b6e188a225eb206d">operator [] </a>( <span class="keywordtype">int</span> i )<span class="keyword"> const </span>{
<a name="l00169"></a>00169       <span class="keywordflow">return</span> <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i];
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="structr3_1_1Vec2.html#add70e6c987976989ac11713d1973056f">00172</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; <a class="code" href="structr3_1_1Vec2.html#add70e6c987976989ac11713d1973056f">operator *= </a>( T d ) {
<a name="l00173"></a>00173       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] *= d; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="structr3_1_1Vec2.html#a774e461d983915459c8f9bdde3d76808">00176</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; <a class="code" href="structr3_1_1Vec2.html#add70e6c987976989ac11713d1973056f">operator *= </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; u ) {
<a name="l00177"></a>00177       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] *= u[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="structr3_1_1Vec2.html#a03ffa61320dd11b0e867203686a97d0c">00180</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; <a class="code" href="structr3_1_1Vec2.html#a03ffa61320dd11b0e867203686a97d0c">operator /= </a>( T d ) {
<a name="l00181"></a>00181       <span class="keywordflow">if</span>(d == 0) <span class="keywordflow">return</span> *<span class="keyword">this</span>; <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] /= d; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00182"></a>00182     }
<a name="l00183"></a>00183 
<a name="l00184"></a><a class="code" href="structr3_1_1Vec2.html#ae47a3818907324b518b75d836d8c8ebc">00184</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; <a class="code" href="structr3_1_1Vec2.html#ae47a3818907324b518b75d836d8c8ebc">operator += </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; u ) {
<a name="l00185"></a>00185       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] += u.<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187 
<a name="l00188"></a><a class="code" href="structr3_1_1Vec2.html#ac7bed93a0fb884417464b014a32a8bb8">00188</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; <a class="code" href="structr3_1_1Vec2.html#ac7bed93a0fb884417464b014a32a8bb8">operator -= </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp; u ) {
<a name="l00189"></a>00189       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structr3_1_1Vec2.html#ae2a63ffb2ce11617dc0586b6ea3f3ff3">N</a>; i++) <a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] -= u.<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 
<a name="l00193"></a><a class="code" href="structr3_1_1Vec2.html#a370b82faf988242902e3f256c400b796">00193</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> <a class="code" href="structr3_1_1Vec2.html#a370b82faf988242902e3f256c400b796">operator - </a>()<span class="keyword"> const </span>{
<a name="l00194"></a>00194       <a class="code" href="structr3_1_1Vec2.html">Vec2</a> rv(*<span class="keyword">this</span>); rv.<a class="code" href="structr3_1_1Vec2.html#a975096a17ab93eff12ccc2a554af887a">Negate</a>(); <span class="keywordflow">return</span> rv;
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00197"></a><a class="code" href="structr3_1_1Vec2.html#a8634fb835912ca18d85898519ac9d401">00197</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> <a class="code" href="structr3_1_1Vec2.html#a8634fb835912ca18d85898519ac9d401">operator + </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp;rhs)<span class="keyword"> const </span>{
<a name="l00198"></a>00198       <a class="code" href="structr3_1_1Vec2.html">Vec2</a> rt(*<span class="keyword">this</span>); <span class="keywordflow">return</span> rt += rhs;
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00201"></a><a class="code" href="structr3_1_1Vec2.html#a763add6c7b04516b12c3fd6ffd2e2592">00201</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2</a> <a class="code" href="structr3_1_1Vec2.html#a370b82faf988242902e3f256c400b796">operator - </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2</a> &amp;rhs)<span class="keyword"> const </span>{
<a name="l00202"></a>00202       <a class="code" href="structr3_1_1Vec2.html">Vec2</a> rt(*<span class="keyword">this</span>); <span class="keywordflow">return</span> rt -= rhs;
<a name="l00203"></a>00203     }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205   };
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 
<a name="l00208"></a>00208   <span class="comment">// vector friend operators</span>
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00211"></a><a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">00211</a>   <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; b, T d ) {
<a name="l00212"></a>00212     <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> rt(b);
<a name="l00213"></a>00213     <span class="keywordflow">return</span> rt *= d;
<a name="l00214"></a>00214   }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00217"></a><a class="code" href="namespacer3.html#aa284507aa1870567a679c659d9024811">00217</a>   <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( T d, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; b ) {
<a name="l00218"></a>00218     <span class="keywordflow">return</span> b*d;
<a name="l00219"></a>00219   }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00222"></a><a class="code" href="namespacer3.html#a56f1bbf1a4348fb7e44ec4cf36b8f0aa">00222</a>   <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; b, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; d ) {
<a name="l00223"></a>00223     <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> rt(b);
<a name="l00224"></a>00224     <span class="keywordflow">return</span> rt *= d;
<a name="l00225"></a>00225   }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00228"></a><a class="code" href="namespacer3.html#a3fe017c63623d4cc8884119b5bfed23f">00228</a>   <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="namespacer3.html#a3fe017c63623d4cc8884119b5bfed23f">operator / </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; b, T d ) {
<a name="l00229"></a>00229     <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> rt(b); <span class="keywordflow">return</span> rt /= d;
<a name="l00230"></a>00230   }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00233"></a><a class="code" href="namespacer3.html#afd34b7febab8498ad60d1e9784f66200">00233</a>   <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="namespacer3.html#afd34b7febab8498ad60d1e9784f66200">operator + </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v2 ) {
<a name="l00234"></a>00234     <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> rt(v1); <span class="keywordflow">return</span> rt += v2;
<a name="l00235"></a>00235   }
<a name="l00236"></a>00236 
<a name="l00237"></a>00237   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00238"></a><a class="code" href="namespacer3.html#a424efcfda44225f960ba60a7841847c7">00238</a>   <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="namespacer3.html#a424efcfda44225f960ba60a7841847c7">operator - </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v2 ) {
<a name="l00239"></a>00239     <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> rt(v1); <span class="keywordflow">return</span> rt -= v2;
<a name="l00240"></a>00240   }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 
<a name="l00243"></a>00243   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00244"></a><a class="code" href="namespacer3.html#a8615485ea001c58af7cb1d6b1ee612c8">00244</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#a8615485ea001c58af7cb1d6b1ee612c8">operator == </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v2 ) {
<a name="l00245"></a>00245     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 2; i++)
<a name="l00246"></a>00246       <span class="keywordflow">if</span>(v1.<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i] != v2.<a class="code" href="structr3_1_1Vec2.html#ad075bbb3f7271bb52d0e52cc5d98612d">Ptr</a>()[i])
<a name="l00247"></a>00247         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00248"></a>00248     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00249"></a>00249   }
<a name="l00250"></a>00250 
<a name="l00251"></a>00251   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00252"></a><a class="code" href="namespacer3.html#ad7488bc006398d5a428b892f93be6f78">00252</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#ad7488bc006398d5a428b892f93be6f78">operator != </a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v2 ) {
<a name="l00253"></a>00253     <span class="keywordflow">return</span> !(v1 == v2);
<a name="l00254"></a>00254   }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l00257"></a><a class="code" href="namespacer3.html#ac13032a0ee898e9acbf5ea7a65af3d54">00257</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="namespacer3.html#ac13032a0ee898e9acbf5ea7a65af3d54">Min</a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp;v2 ) {
<a name="l00258"></a>00258       <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> r;
<a name="l00259"></a>00259       r.<a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a> = std::min( v1.<a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>, v2.<a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a> );
<a name="l00260"></a>00260       r.<a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a> = std::min( v1.<a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a>, v2.<a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a> );
<a name="l00261"></a>00261       <span class="keywordflow">return</span> r;
<a name="l00262"></a>00262   }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l00265"></a><a class="code" href="namespacer3.html#a4694a3c56a7254ea097e01c8f97be095">00265</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="namespacer3.html#a4694a3c56a7254ea097e01c8f97be095">Max</a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp;v2 ) {
<a name="l00266"></a>00266       <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> r;
<a name="l00267"></a>00267       r.<a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a> = std::max( v1.<a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a>, v2.<a class="code" href="structr3_1_1Vec2.html#a27e153d9878b0f553f555db8163580a6">x</a> );
<a name="l00268"></a>00268       r.<a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a> = std::max( v1.<a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a>, v2.<a class="code" href="structr3_1_1Vec2.html#ad6de6334dde19074a3861d613add5671">y</a> );
<a name="l00269"></a>00269       <span class="keywordflow">return</span> r;
<a name="l00270"></a>00270   }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T&gt;
<a name="l00275"></a><a class="code" href="classr3_1_1Vec3.html">00275</a>   <span class="keyword">class </span><a class="code" href="classr3_1_1Vec3.html">Vec3</a> {
<a name="l00276"></a>00276     <span class="keyword">public</span>:
<a name="l00277"></a><a class="code" href="classr3_1_1Vec3.html#a26104bfb9168c3cdcf3581185992e186">00277</a>     <a class="code" href="classr3_1_1Vec3.html#a26104bfb9168c3cdcf3581185992e186">Vec3</a>() { <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> = <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> = <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> = 0.f; }
<a name="l00278"></a><a class="code" href="classr3_1_1Vec3.html#a3066ca9e568bb73018d1058e126cfb01">00278</a>     <a class="code" href="classr3_1_1Vec3.html#a3066ca9e568bb73018d1058e126cfb01">Vec3</a>(<span class="keyword">const</span> T * tp) { <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> = tp[0]; <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> = tp[1]; <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> = tp[2]; }
<a name="l00279"></a>00279 
<a name="l00280"></a><a class="code" href="classr3_1_1Vec3.html#a66e644478c828cbb20d29763e2e40842">00280</a>     <a class="code" href="classr3_1_1Vec3.html#a66e644478c828cbb20d29763e2e40842">Vec3</a>(T <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>, T <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>, T <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>) {
<a name="l00281"></a>00281       <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[0] = <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>; <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[1] = <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>; <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[2] = <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>;
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284     <span class="keyword">template</span> &lt; <span class="keyword">typename</span> U &gt;
<a name="l00285"></a><a class="code" href="classr3_1_1Vec3.html#aac83a09550b9b6749fa44504c2db2550">00285</a>     <a class="code" href="classr3_1_1Vec3.html#a26104bfb9168c3cdcf3581185992e186">Vec3</a>(<span class="keyword">const</span> U X, <span class="keyword">const</span> U Y, <span class="keyword">const</span> U Z)
<a name="l00286"></a>00286     : <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>(static_cast&lt;T&gt;(X)),
<a name="l00287"></a>00287       <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>(static_cast&lt;T&gt;(Y)),
<a name="l00288"></a>00288       <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>(static_cast&lt;T&gt;(Z))
<a name="l00289"></a>00289     {
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291 
<a name="l00292"></a><a class="code" href="classr3_1_1Vec3.html#a3784d229dc876e122bca69ba35dbdfae">00292</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Vec3.html#a3784d229dc876e122bca69ba35dbdfae">GetValue</a>(T &amp; <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>, T &amp; <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>, T &amp; <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>)<span class="keyword"> const </span>{
<a name="l00293"></a>00293       x = <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[0]; y = <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[1]; z = <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[2];
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="classr3_1_1Vec3.html#a9c8858b38ef5130c26c9d51abbc2b037">00296</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> <a class="code" href="classr3_1_1Vec3.html#a9c8858b38ef5130c26c9d51abbc2b037">Cross</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp;rhs )<span class="keyword"> const </span>{
<a name="l00297"></a>00297       <a class="code" href="classr3_1_1Vec3.html">Vec3</a> rt;
<a name="l00298"></a>00298       rt.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> = <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[1] * rhs.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> - <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[2] * rhs.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>;
<a name="l00299"></a>00299       rt.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> = <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[2] * rhs.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> - <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[0] * rhs.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>;
<a name="l00300"></a>00300       rt.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> = <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[0] * rhs.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> - <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[1] * rhs.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>;
<a name="l00301"></a>00301       <span class="keywordflow">return</span> rt;
<a name="l00302"></a>00302     }
<a name="l00303"></a>00303 
<a name="l00304"></a><a class="code" href="classr3_1_1Vec3.html#a7f464b08f0357fa0bfd3a453d8820b72">00304</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#a7f464b08f0357fa0bfd3a453d8820b72">SetValue</a>( <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>, <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>, <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>) {
<a name="l00305"></a>00305       <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[0] = <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>; <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[1] = <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>; <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[2] = <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307 
<a name="l00308"></a><a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">00308</a>     T <a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>, <a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>, <a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>;
<a name="l00309"></a>00309 
<a name="l00310"></a><a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">00310</a>     T * <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>() { <span class="keywordflow">return</span> &amp;<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>; }
<a name="l00311"></a><a class="code" href="classr3_1_1Vec3.html#a2d5c8c42fb3896a019c5dfb9233e0561">00311</a>     <span class="keyword">const</span> T * <a class="code" href="classr3_1_1Vec3.html#a2d5c8c42fb3896a019c5dfb9233e0561">Ptr</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>; }
<a name="l00312"></a>00312 
<a name="l00313"></a><a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">00313</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a> = 3;
<a name="l00314"></a>00314     <span class="comment">// generic part</span>
<a name="l00315"></a>00315 
<a name="l00316"></a><a class="code" href="classr3_1_1Vec3.html#aea73f92d0b2e016527e285612e66b639">00316</a>     <span class="keywordtype">int</span> <a class="code" href="classr3_1_1Vec3.html#aea73f92d0b2e016527e285612e66b639">Size</a>()<span class="keyword"> const </span>{
<a name="l00317"></a>00317       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>;
<a name="l00318"></a>00318     }
<a name="l00319"></a>00319 
<a name="l00320"></a><a class="code" href="classr3_1_1Vec3.html#a8df93bce1d89868efb1f3ad8a48ba9e7">00320</a>     <span class="keyword">const</span> T * <a class="code" href="classr3_1_1Vec3.html#a8df93bce1d89868efb1f3ad8a48ba9e7">GetValue</a>()<span class="keyword"> const </span>{
<a name="l00321"></a>00321       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>();
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 
<a name="l00325"></a><a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">00325</a>     T <a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; rhs )<span class="keyword"> const </span>{
<a name="l00326"></a>00326       T r = 0;
<a name="l00327"></a>00327       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) r += <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i]*rhs.<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i];
<a name="l00328"></a>00328       <span class="keywordflow">return</span> r;
<a name="l00329"></a>00329     }
<a name="l00330"></a>00330 
<a name="l00331"></a><a class="code" href="classr3_1_1Vec3.html#a10db8a730f86d0af930920a9de02581c">00331</a>     T <a class="code" href="classr3_1_1Vec3.html#a10db8a730f86d0af930920a9de02581c">Length</a>()<span class="keyword"> const </span>{
<a name="l00332"></a>00332       T r = 0;
<a name="l00333"></a>00333       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) r += <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i]*<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i];
<a name="l00334"></a>00334       <span class="keywordflow">return</span> T(sqrt(r));
<a name="l00335"></a>00335     }
<a name="l00336"></a>00336 
<a name="l00337"></a><a class="code" href="classr3_1_1Vec3.html#a47be0a700e347c48959f5428b81b64ca">00337</a>     T <a class="code" href="classr3_1_1Vec3.html#a47be0a700e347c48959f5428b81b64ca">SquareNorm</a>()<span class="keyword"> const </span>{
<a name="l00338"></a>00338       T r = 0;
<a name="l00339"></a>00339       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) r += <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i]*<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i];
<a name="l00340"></a>00340       <span class="keywordflow">return</span> r;
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342 
<a name="l00343"></a><a class="code" href="classr3_1_1Vec3.html#a159a0655a4716a3675d349bc9cd2d21c">00343</a>     <span class="keywordtype">void</span>  <a class="code" href="classr3_1_1Vec3.html#a159a0655a4716a3675d349bc9cd2d21c">Negate</a>() {
<a name="l00344"></a>00344       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] = -<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i];
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 
<a name="l00348"></a><a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">00348</a>     T <a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>() {
<a name="l00349"></a>00349       T sum(0);
<a name="l00350"></a>00350       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++)
<a name="l00351"></a>00351         sum += <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i]*<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i];
<a name="l00352"></a>00352       sum = T(sqrt(sum));
<a name="l00353"></a>00353       <span class="keywordflow">if</span> (sum &gt; <a class="code" href="linear_8h.html#adbf50c4e72350fb6740ed5c3f3ca0b14">R3_EPSILON</a>)
<a name="l00354"></a>00354         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++)
<a name="l00355"></a>00355           <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] /= sum;
<a name="l00356"></a>00356       <span class="keywordflow">return</span> sum;
<a name="l00357"></a>00357     }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359 
<a name="l00360"></a><a class="code" href="classr3_1_1Vec3.html#adb23880399908ea8228db0ac7e3196f0">00360</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#adb23880399908ea8228db0ac7e3196f0">SetValue</a>( <span class="keyword">const</span> T * rhs ) {
<a name="l00361"></a>00361       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] = rhs[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00362"></a>00362     }
<a name="l00363"></a>00363 
<a name="l00364"></a><a class="code" href="classr3_1_1Vec3.html#a9c48e4c2d848a881044e8e7554ac6f6e">00364</a>     T &amp; <a class="code" href="classr3_1_1Vec3.html#a9c48e4c2d848a881044e8e7554ac6f6e">operator [] </a>( <span class="keywordtype">int</span> i ) {
<a name="l00365"></a>00365       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i];
<a name="l00366"></a>00366     }
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="classr3_1_1Vec3.html#a1fb51cfd7fda4e3be18b3c47fb01fa43">00368</a>     <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec3.html#a9c48e4c2d848a881044e8e7554ac6f6e">operator [] </a>( <span class="keywordtype">int</span> i )<span class="keyword"> const </span>{
<a name="l00369"></a>00369       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i];
<a name="l00370"></a>00370     }
<a name="l00371"></a>00371 
<a name="l00372"></a><a class="code" href="classr3_1_1Vec3.html#a9961a80a894c3741bf800a8bc007e1e9">00372</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#a9961a80a894c3741bf800a8bc007e1e9">operator *= </a>( T d ) {
<a name="l00373"></a>00373       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] *= d; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="classr3_1_1Vec3.html#a05465541eddfd5b86585a4a57c1be2a9">00376</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#a9961a80a894c3741bf800a8bc007e1e9">operator *= </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; u ) {
<a name="l00377"></a>00377       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] *= u[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379 
<a name="l00380"></a><a class="code" href="classr3_1_1Vec3.html#a15c63dc8ee89e6fe52c0c98f8e4ecb33">00380</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#a15c63dc8ee89e6fe52c0c98f8e4ecb33">operator /= </a>( T d ) {
<a name="l00381"></a>00381       <span class="keywordflow">if</span>(d == 0) <span class="keywordflow">return</span> *<span class="keyword">this</span>; <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] /= d; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00382"></a>00382     }
<a name="l00383"></a>00383 
<a name="l00384"></a><a class="code" href="classr3_1_1Vec3.html#a630e0e15b11ec890a0fb248032d608c2">00384</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#a630e0e15b11ec890a0fb248032d608c2">operator += </a>( T d ) {
<a name="l00385"></a>00385       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] += d; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387 
<a name="l00388"></a><a class="code" href="classr3_1_1Vec3.html#a3b90612d1aa2c8f7b35a85eafd722a45">00388</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#a630e0e15b11ec890a0fb248032d608c2">operator += </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; u ) {
<a name="l00389"></a>00389       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] += u.<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391 
<a name="l00392"></a><a class="code" href="classr3_1_1Vec3.html#a2350b763192524f387c838e3bb9bec68">00392</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#a2350b763192524f387c838e3bb9bec68">operator -= </a>( T d ) {
<a name="l00393"></a>00393       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] -= d; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395 
<a name="l00396"></a><a class="code" href="classr3_1_1Vec3.html#ad3b782c6626c1434954c87eae69b51d3">00396</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; <a class="code" href="classr3_1_1Vec3.html#a2350b763192524f387c838e3bb9bec68">operator -= </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp; u ) {
<a name="l00397"></a>00397       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec3.html#ab59163ba3729940d95d438b4b832abf6">N</a>; i++) <a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] -= u.<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 
<a name="l00401"></a><a class="code" href="classr3_1_1Vec3.html#a2d3196ea391ece4592fcb787673b36bd">00401</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> <a class="code" href="classr3_1_1Vec3.html#a2d3196ea391ece4592fcb787673b36bd">operator - </a>()<span class="keyword"> const </span>{
<a name="l00402"></a>00402       <a class="code" href="classr3_1_1Vec3.html">Vec3</a> rv(*<span class="keyword">this</span>); rv.<a class="code" href="classr3_1_1Vec3.html#a159a0655a4716a3675d349bc9cd2d21c">Negate</a>(); <span class="keywordflow">return</span> rv;
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 
<a name="l00405"></a><a class="code" href="classr3_1_1Vec3.html#a4cae0357760f1a140adc6786dd585a03">00405</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> <a class="code" href="classr3_1_1Vec3.html#a4cae0357760f1a140adc6786dd585a03">operator + </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp;rhs)<span class="keyword"> const </span>{
<a name="l00406"></a>00406       <a class="code" href="classr3_1_1Vec3.html">Vec3</a> rt(*<span class="keyword">this</span>); <span class="keywordflow">return</span> rt += rhs;
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408 
<a name="l00409"></a><a class="code" href="classr3_1_1Vec3.html#a7a26a2724f3a958853f6be1024d10d1f">00409</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3</a> <a class="code" href="classr3_1_1Vec3.html#a2d3196ea391ece4592fcb787673b36bd">operator - </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3</a> &amp;rhs)<span class="keyword"> const </span>{
<a name="l00410"></a>00410       <a class="code" href="classr3_1_1Vec3.html">Vec3</a> rt(*<span class="keyword">this</span>); <span class="keywordflow">return</span> rt -= rhs;
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412 
<a name="l00413"></a>00413   };
<a name="l00414"></a>00414 
<a name="l00415"></a>00415 
<a name="l00416"></a>00416   <span class="comment">// vector friend operators</span>
<a name="l00417"></a>00417 
<a name="l00418"></a>00418   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00419"></a><a class="code" href="namespacer3.html#aae55e558366d3e6a6bef94f31fa76940">00419</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; b, T d ) {
<a name="l00420"></a>00420     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> rt(b);
<a name="l00421"></a>00421     <span class="keywordflow">return</span> rt *= d;
<a name="l00422"></a>00422   }
<a name="l00423"></a>00423 
<a name="l00424"></a>00424   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00425"></a><a class="code" href="namespacer3.html#acd1b557282c078ad458c7d519037d4d8">00425</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( T d, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; b ) {
<a name="l00426"></a>00426     <span class="keywordflow">return</span> b*d;
<a name="l00427"></a>00427   }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00430"></a><a class="code" href="namespacer3.html#a0eebd9c8db85cd565edc8744f92fb6bf">00430</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; b, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; d ) {
<a name="l00431"></a>00431     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> rt(b);
<a name="l00432"></a>00432     <span class="keywordflow">return</span> rt *= d;
<a name="l00433"></a>00433   }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00436"></a><a class="code" href="namespacer3.html#ae920ccddb63b918f869642cbd4efc1f5">00436</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a3fe017c63623d4cc8884119b5bfed23f">operator / </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; b, T d ) {
<a name="l00437"></a>00437     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> rt(b); <span class="keywordflow">return</span> rt /= d;
<a name="l00438"></a>00438   }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00441"></a><a class="code" href="namespacer3.html#abddda2e270fbe5d9e60dec33eaa90b83">00441</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#afd34b7febab8498ad60d1e9784f66200">operator + </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v2 ) {
<a name="l00442"></a>00442     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> rt(v1); <span class="keywordflow">return</span> rt += v2;
<a name="l00443"></a>00443   }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00446"></a><a class="code" href="namespacer3.html#a0d1978c99a03986ad6f39931265364c3">00446</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a424efcfda44225f960ba60a7841847c7">operator - </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v2 ) {
<a name="l00447"></a>00447     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> rt(v1); <span class="keywordflow">return</span> rt -= v2;
<a name="l00448"></a>00448   }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 
<a name="l00451"></a>00451   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00452"></a><a class="code" href="namespacer3.html#a63622edf3838e3faff58989d57024353">00452</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#a8615485ea001c58af7cb1d6b1ee612c8">operator == </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v2 ) {
<a name="l00453"></a>00453     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
<a name="l00454"></a>00454       <span class="keywordflow">if</span>(v1.<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i] != v2.<a class="code" href="classr3_1_1Vec3.html#a2d2c5b8b24c833e052a3917de8452f23">Ptr</a>()[i])
<a name="l00455"></a>00455         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00456"></a>00456     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00457"></a>00457   }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00460"></a><a class="code" href="namespacer3.html#ab1e8dd5b7d2686ecbc7626df9a999513">00460</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#ad7488bc006398d5a428b892f93be6f78">operator != </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v2 ) {
<a name="l00461"></a>00461     <span class="keywordflow">return</span> !(v1 == v2);
<a name="l00462"></a>00462   }
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l00465"></a><a class="code" href="namespacer3.html#aa7cc226d7549495d5b82942c72bdad5f">00465</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#ac13032a0ee898e9acbf5ea7a65af3d54">Min</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;v2 ) {
<a name="l00466"></a>00466       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> r;
<a name="l00467"></a>00467       r.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> = std::min( v1.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>, v2.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> );
<a name="l00468"></a>00468       r.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> = std::min( v1.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>, v2.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> );
<a name="l00469"></a>00469       r.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> = std::min( v1.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>, v2.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> );
<a name="l00470"></a>00470       <span class="keywordflow">return</span> r;
<a name="l00471"></a>00471   }
<a name="l00472"></a>00472 
<a name="l00473"></a>00473   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l00474"></a><a class="code" href="namespacer3.html#a36f3bc1fbd93c7a6c0ff24f59c0a5462">00474</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a4694a3c56a7254ea097e01c8f97be095">Max</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;v2 ) {
<a name="l00475"></a>00475       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> r;
<a name="l00476"></a>00476       r.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> = std::max( v1.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>, v2.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> );
<a name="l00477"></a>00477       r.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> = std::max( v1.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>, v2.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> );
<a name="l00478"></a>00478       r.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> = std::max( v1.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>, v2.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> );
<a name="l00479"></a>00479       <span class="keywordflow">return</span> r;
<a name="l00480"></a>00480   }
<a name="l00481"></a>00481 
<a name="l00482"></a>00482 
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 
<a name="l00488"></a>00488   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T&gt;
<a name="l00489"></a><a class="code" href="classr3_1_1Vec4.html">00489</a>     <span class="keyword">class </span><a class="code" href="classr3_1_1Vec4.html">Vec4</a> {
<a name="l00490"></a>00490     <span class="keyword">public</span>:
<a name="l00491"></a><a class="code" href="classr3_1_1Vec4.html#a0147235bc17964971373d25cb6e8154a">00491</a>     <a class="code" href="classr3_1_1Vec4.html#a0147235bc17964971373d25cb6e8154a">Vec4</a>() { <a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> = <a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> = <a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> = 0.f; <a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = 1.f; }
<a name="l00492"></a><a class="code" href="classr3_1_1Vec4.html#a3f4349d5e21abe6d2fb05c18a6fecb71">00492</a>     <a class="code" href="classr3_1_1Vec4.html#a3f4349d5e21abe6d2fb05c18a6fecb71">Vec4</a>(<span class="keyword">const</span> T * tp) { <a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> = tp[0]; <a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> = tp[1]; <a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> = tp[2]; <a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = tp[3]; }
<a name="l00493"></a><a class="code" href="classr3_1_1Vec4.html#afb638a48f45f43e6502dc2c0f53d2d1c">00493</a>         <a class="code" href="classr3_1_1Vec4.html#afb638a48f45f43e6502dc2c0f53d2d1c">Vec4</a>(<span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; t, T fourth) {
<a name="l00494"></a>00494       <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[0] = t.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[1] = t.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[2] = t.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[3] = fourth;
<a name="l00495"></a>00495     }
<a name="l00496"></a><a class="code" href="classr3_1_1Vec4.html#a6e01d8898c5df5861f4355248eb72a44">00496</a>         <a class="code" href="classr3_1_1Vec4.html#a6e01d8898c5df5861f4355248eb72a44">Vec4</a>(T <a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>, T <a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>, T <a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> = 0, T <a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = 1) {
<a name="l00497"></a>00497       <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[0] = <a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[1] = <a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[2] = <a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[3] = <a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>;
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499 
<a name="l00500"></a><a class="code" href="classr3_1_1Vec4.html#aa4dac758a86cadd17c337f6df239ea13">00500</a>         <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Vec4.html#aa4dac758a86cadd17c337f6df239ea13">GetValue</a>(T &amp; <a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>, T &amp; <a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>, T &amp; <a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>, T &amp; <a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>)<span class="keyword"> const </span>{
<a name="l00501"></a>00501       x = <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[0]; y = <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[1]; z = <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[2]; w = <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[3];
<a name="l00502"></a>00502     }
<a name="l00503"></a>00503 
<a name="l00504"></a><a class="code" href="classr3_1_1Vec4.html#ae9ef0da7a4a3c95de856b50a41180de3">00504</a>         <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; <a class="code" href="classr3_1_1Vec4.html#ae9ef0da7a4a3c95de856b50a41180de3">SetValue</a>( <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>, <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>, <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>, <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>) {
<a name="l00505"></a>00505       <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[0] = <a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[1] = <a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[2] = <a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>; <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[3] = <a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00506"></a>00506     }
<a name="l00507"></a>00507 
<a name="l00508"></a><a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">00508</a>     T <a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>, <a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>, <a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>, <a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>;
<a name="l00509"></a>00509 
<a name="l00510"></a><a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">00510</a>     T * <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>() { <span class="keywordflow">return</span> &amp;<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>; }
<a name="l00511"></a><a class="code" href="classr3_1_1Vec4.html#adc8194aa68bf2fae3ed47c126eecef41">00511</a>     <span class="keyword">const</span> T * <a class="code" href="classr3_1_1Vec4.html#adc8194aa68bf2fae3ed47c126eecef41">Ptr</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>; }
<a name="l00512"></a>00512 
<a name="l00513"></a><a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">00513</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a> = 4;
<a name="l00514"></a>00514     <span class="comment">// generic part</span>
<a name="l00515"></a>00515 
<a name="l00516"></a><a class="code" href="classr3_1_1Vec4.html#af0654138f3b23314c2e5e7540e388217">00516</a>     <span class="keywordtype">int</span> <a class="code" href="classr3_1_1Vec4.html#af0654138f3b23314c2e5e7540e388217">Size</a>()<span class="keyword"> const </span>{
<a name="l00517"></a>00517       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>;
<a name="l00518"></a>00518     }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520 
<a name="l00521"></a><a class="code" href="classr3_1_1Vec4.html#acaefc8435b96ed2c573485ca1b50a72f">00521</a>     <span class="keyword">const</span> T * <a class="code" href="classr3_1_1Vec4.html#acaefc8435b96ed2c573485ca1b50a72f">GetValue</a>()<span class="keyword"> const </span>{
<a name="l00522"></a>00522       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>();
<a name="l00523"></a>00523     }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525 
<a name="l00526"></a><a class="code" href="classr3_1_1Vec4.html#a02cef871208c984f7526c19447c1c149">00526</a>     T <a class="code" href="classr3_1_1Vec4.html#a02cef871208c984f7526c19447c1c149">Dot</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; rhs )<span class="keyword"> const </span>{
<a name="l00527"></a>00527       T r = 0;
<a name="l00528"></a>00528       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) r += <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i]*rhs.<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i];
<a name="l00529"></a>00529       <span class="keywordflow">return</span> r;
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531 
<a name="l00532"></a><a class="code" href="classr3_1_1Vec4.html#afe4f913155a2ff0cf7f3945f0e218f16">00532</a>     T <a class="code" href="classr3_1_1Vec4.html#afe4f913155a2ff0cf7f3945f0e218f16">Length</a>()<span class="keyword"> const </span>{
<a name="l00533"></a>00533       T r = 0;
<a name="l00534"></a>00534       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) r += <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i]*<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i];
<a name="l00535"></a>00535       <span class="keywordflow">return</span> T(sqrt(r));
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537 
<a name="l00538"></a><a class="code" href="classr3_1_1Vec4.html#ae49294ec4bb244dbed03a7e0dcd08f67">00538</a>     T <a class="code" href="classr3_1_1Vec4.html#ae49294ec4bb244dbed03a7e0dcd08f67">SquareNorm</a>()<span class="keyword"> const </span>{
<a name="l00539"></a>00539       T r = 0;
<a name="l00540"></a>00540       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) r += <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i]*<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i];
<a name="l00541"></a>00541       <span class="keywordflow">return</span> r;
<a name="l00542"></a>00542     }
<a name="l00543"></a>00543 
<a name="l00544"></a><a class="code" href="classr3_1_1Vec4.html#a6fa316d6315cd651c39a7b4432c8be05">00544</a>     <span class="keywordtype">void</span>  <a class="code" href="classr3_1_1Vec4.html#a6fa316d6315cd651c39a7b4432c8be05">Negate</a>() {
<a name="l00545"></a>00545       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] = -<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i];
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 
<a name="l00549"></a><a class="code" href="classr3_1_1Vec4.html#a189220993c045bd74232041f84bcb7f9">00549</a>     T <a class="code" href="classr3_1_1Vec4.html#a189220993c045bd74232041f84bcb7f9">Normalize</a>() {
<a name="l00550"></a>00550       T sum(0);
<a name="l00551"></a>00551       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++)
<a name="l00552"></a>00552         sum += <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i]*<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i];
<a name="l00553"></a>00553       sum = T(sqrt(sum));
<a name="l00554"></a>00554       <span class="keywordflow">if</span> (sum &gt; <a class="code" href="linear_8h.html#adbf50c4e72350fb6740ed5c3f3ca0b14">R3_EPSILON</a>)
<a name="l00555"></a>00555         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++)
<a name="l00556"></a>00556           <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] /= sum;
<a name="l00557"></a>00557       <span class="keywordflow">return</span> sum;
<a name="l00558"></a>00558     }
<a name="l00559"></a>00559 
<a name="l00560"></a>00560 
<a name="l00561"></a><a class="code" href="classr3_1_1Vec4.html#a123a73f0b5bf81932b1d6ffbcf7aeb22">00561</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; <a class="code" href="classr3_1_1Vec4.html#a123a73f0b5bf81932b1d6ffbcf7aeb22">SetValue</a>( <span class="keyword">const</span> T * rhs ) {
<a name="l00562"></a>00562       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] = rhs[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00563"></a>00563     }
<a name="l00564"></a>00564 
<a name="l00565"></a><a class="code" href="classr3_1_1Vec4.html#a0a2fad9a51e73944f1a5852dfc9ee733">00565</a>     T &amp; <a class="code" href="classr3_1_1Vec4.html#a0a2fad9a51e73944f1a5852dfc9ee733">operator [] </a>( <span class="keywordtype">int</span> i ) {
<a name="l00566"></a>00566       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i];
<a name="l00567"></a>00567     }
<a name="l00568"></a>00568 
<a name="l00569"></a><a class="code" href="classr3_1_1Vec4.html#a2f8bde8957c94ee9bfa7fbd01b9eab3b">00569</a>     <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Vec4.html#a0a2fad9a51e73944f1a5852dfc9ee733">operator [] </a>( <span class="keywordtype">int</span> i )<span class="keyword"> const </span>{
<a name="l00570"></a>00570       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i];
<a name="l00571"></a>00571     }
<a name="l00572"></a>00572 
<a name="l00573"></a><a class="code" href="classr3_1_1Vec4.html#a498bde9e4550edceef311e6aae515fe1">00573</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; <a class="code" href="classr3_1_1Vec4.html#a498bde9e4550edceef311e6aae515fe1">operator *= </a>( T d ) {
<a name="l00574"></a>00574       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] *= d; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00575"></a>00575     }
<a name="l00576"></a>00576 
<a name="l00577"></a><a class="code" href="classr3_1_1Vec4.html#a0ef8896d05181c561a3bf0c322515d15">00577</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; <a class="code" href="classr3_1_1Vec4.html#a498bde9e4550edceef311e6aae515fe1">operator *= </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; u ) {
<a name="l00578"></a>00578       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] *= u[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580 
<a name="l00581"></a><a class="code" href="classr3_1_1Vec4.html#a0cf08e499b4469d1a94fdd83b648aa3c">00581</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; <a class="code" href="classr3_1_1Vec4.html#a0cf08e499b4469d1a94fdd83b648aa3c">operator /= </a>( T d ) {
<a name="l00582"></a>00582       <span class="keywordflow">if</span>(d == 0) <span class="keywordflow">return</span> *<span class="keyword">this</span>; <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] /= d; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00583"></a>00583     }
<a name="l00584"></a>00584 
<a name="l00585"></a><a class="code" href="classr3_1_1Vec4.html#a83ba3a94a06b1ad2ecbf6b80cbbed232">00585</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; <a class="code" href="classr3_1_1Vec4.html#a83ba3a94a06b1ad2ecbf6b80cbbed232">operator += </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; u ) {
<a name="l00586"></a>00586       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] += u.<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00587"></a>00587     }
<a name="l00588"></a>00588 
<a name="l00589"></a><a class="code" href="classr3_1_1Vec4.html#a330eb275d5aa6f85b575749dd4b98e3d">00589</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; <a class="code" href="classr3_1_1Vec4.html#a330eb275d5aa6f85b575749dd4b98e3d">operator -= </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp; u ) {
<a name="l00590"></a>00590       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classr3_1_1Vec4.html#a5dbf113e0b2c40e480e013b13160f039">N</a>; i++) <a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] -= u.<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i]; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00591"></a>00591     }
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 
<a name="l00594"></a><a class="code" href="classr3_1_1Vec4.html#ac2d3008c1970dbb12f11d9f0c700048e">00594</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> <a class="code" href="classr3_1_1Vec4.html#ac2d3008c1970dbb12f11d9f0c700048e">operator - </a>()<span class="keyword"> const </span>{
<a name="l00595"></a>00595       <a class="code" href="classr3_1_1Vec4.html">Vec4</a> rv(*<span class="keyword">this</span>); rv.negate(); <span class="keywordflow">return</span> rv;
<a name="l00596"></a>00596     }
<a name="l00597"></a>00597 
<a name="l00598"></a><a class="code" href="classr3_1_1Vec4.html#ab174d844fdbdb3c7199b2b5955661b8f">00598</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> <a class="code" href="classr3_1_1Vec4.html#ab174d844fdbdb3c7199b2b5955661b8f">operator + </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp;rhs)<span class="keyword"> const </span>{
<a name="l00599"></a>00599       <a class="code" href="classr3_1_1Vec4.html">Vec4</a> rt(*<span class="keyword">this</span>); <span class="keywordflow">return</span> rt += rhs;
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601 
<a name="l00602"></a><a class="code" href="classr3_1_1Vec4.html#a3d19ebb4996585abf20dfa76655aac69">00602</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4</a> <a class="code" href="classr3_1_1Vec4.html#ac2d3008c1970dbb12f11d9f0c700048e">operator - </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4</a> &amp;rhs)<span class="keyword"> const </span>{
<a name="l00603"></a>00603       <a class="code" href="classr3_1_1Vec4.html">Vec4</a> rt(*<span class="keyword">this</span>); <span class="keywordflow">return</span> rt -= rhs;
<a name="l00604"></a>00604     }
<a name="l00605"></a>00605 
<a name="l00606"></a>00606 
<a name="l00607"></a>00607   };
<a name="l00608"></a>00608 
<a name="l00609"></a>00609     <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T &gt; <span class="keyword">inline</span>
<a name="l00610"></a><a class="code" href="namespacer3.html#a6c6eb105099d8f8b27f661f7c4cf3cd4">00610</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a6c6eb105099d8f8b27f661f7c4cf3cd4">Homogenize</a>(<span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v) {
<a name="l00611"></a>00611     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> rt;
<a name="l00612"></a>00612     assert(v[3] != <a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a>);
<a name="l00613"></a>00613     rt[0] = v[0]/v[3];
<a name="l00614"></a>00614     rt[1] = v[1]/v[3];
<a name="l00615"></a>00615     rt[2] = v[2]/v[3];
<a name="l00616"></a>00616     <span class="keywordflow">return</span> rt;
<a name="l00617"></a>00617     }
<a name="l00618"></a>00618 
<a name="l00619"></a>00619   <span class="comment">// vector friend operators</span>
<a name="l00620"></a>00620 
<a name="l00621"></a>00621   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00622"></a><a class="code" href="namespacer3.html#a1f99b11d9837928dc5cf82024fe43a14">00622</a>   <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; b, T d ) {
<a name="l00623"></a>00623     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> rt(b);
<a name="l00624"></a>00624     <span class="keywordflow">return</span> rt *= d;
<a name="l00625"></a>00625   }
<a name="l00626"></a>00626 
<a name="l00627"></a>00627   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00628"></a><a class="code" href="namespacer3.html#a730effc39dd0a74ece6c19122b47ac66">00628</a>   <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( T d, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; b ) {
<a name="l00629"></a>00629     <span class="keywordflow">return</span> b*d;
<a name="l00630"></a>00630   }
<a name="l00631"></a>00631 
<a name="l00632"></a>00632   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00633"></a><a class="code" href="namespacer3.html#a3ed265dc09444816de869e09eb6a3c09">00633</a>   <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; b, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; d ) {
<a name="l00634"></a>00634     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> rt(b);
<a name="l00635"></a>00635     <span class="keywordflow">return</span> rt *= d;
<a name="l00636"></a>00636   }
<a name="l00637"></a>00637 
<a name="l00638"></a>00638   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00639"></a><a class="code" href="namespacer3.html#a058fbff4ee40b9cc99f670117593166c">00639</a>   <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a3fe017c63623d4cc8884119b5bfed23f">operator / </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; b, T d ) {
<a name="l00640"></a>00640     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> rt(b); <span class="keywordflow">return</span> rt /= d;
<a name="l00641"></a>00641   }
<a name="l00642"></a>00642 
<a name="l00643"></a>00643   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00644"></a><a class="code" href="namespacer3.html#a0394ea334a4eb489d5d8cefc72dcd4d7">00644</a>   <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#afd34b7febab8498ad60d1e9784f66200">operator + </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v2 ) {
<a name="l00645"></a>00645     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> rt(v1); <span class="keywordflow">return</span> rt += v2;
<a name="l00646"></a>00646   }
<a name="l00647"></a>00647 
<a name="l00648"></a>00648   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00649"></a><a class="code" href="namespacer3.html#a0e61b0aff731aae263f7c0a07459c721">00649</a>   <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a424efcfda44225f960ba60a7841847c7">operator - </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v2 ) {
<a name="l00650"></a>00650     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> rt(v1); <span class="keywordflow">return</span> rt -= v2;
<a name="l00651"></a>00651   }
<a name="l00652"></a>00652 
<a name="l00653"></a>00653 
<a name="l00654"></a>00654   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00655"></a><a class="code" href="namespacer3.html#a7a0b6657faa972fbcb534e9b3814d655">00655</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#a8615485ea001c58af7cb1d6b1ee612c8">operator == </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v2 ) {
<a name="l00656"></a>00656     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 4; i++)
<a name="l00657"></a>00657       <span class="keywordflow">if</span>(v1.<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i] != v2.<a class="code" href="classr3_1_1Vec4.html#a303913c79965dbcfe16559205ea48a59">Ptr</a>()[i])
<a name="l00658"></a>00658         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00659"></a>00659     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00660"></a>00660   }
<a name="l00661"></a>00661 
<a name="l00662"></a>00662   <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span>
<a name="l00663"></a><a class="code" href="namespacer3.html#afa478f71d2b028baa1871ca394de01ab">00663</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#ad7488bc006398d5a428b892f93be6f78">operator != </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v2 ) {
<a name="l00664"></a>00664     <span class="keywordflow">return</span> !(v1 == v2);
<a name="l00665"></a>00665   }
<a name="l00666"></a>00666 
<a name="l00667"></a>00667   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l00668"></a><a class="code" href="namespacer3.html#a1afa40d482e39f0a9dc2b89879d1dfa6">00668</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#ac13032a0ee898e9acbf5ea7a65af3d54">Min</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v2 ) {
<a name="l00669"></a>00669       <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> r;
<a name="l00670"></a>00670       r.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> = std::min( v1.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>, v2.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> );
<a name="l00671"></a>00671       r.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> = std::min( v1.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>, v2.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> );
<a name="l00672"></a>00672       r.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> = std::min( v1.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>, v2.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> );
<a name="l00673"></a>00673       r.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = std::min( v1.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>, v2.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> );
<a name="l00674"></a>00674       <span class="keywordflow">return</span> r;
<a name="l00675"></a>00675   }
<a name="l00676"></a>00676 
<a name="l00677"></a>00677   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l00678"></a><a class="code" href="namespacer3.html#a7250cfcb94a00c45524a78d8b0666172">00678</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a4694a3c56a7254ea097e01c8f97be095">Max</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v2 ) {
<a name="l00679"></a>00679       <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> r;
<a name="l00680"></a>00680       r.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> = std::max( v1.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>, v2.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> );
<a name="l00681"></a>00681       r.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> = std::max( v1.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>, v2.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> );
<a name="l00682"></a>00682       r.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> = std::max( v1.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>, v2.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> );
<a name="l00683"></a>00683       r.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = std::max( v1.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>, v2.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> );
<a name="l00684"></a>00684       <span class="keywordflow">return</span> r;
<a name="l00685"></a>00685   }
<a name="l00686"></a>00686 
<a name="l00687"></a>00687 
<a name="l00688"></a>00688 
<a name="l00689"></a>00689 
<a name="l00690"></a>00690 
<a name="l00691"></a>00691 
<a name="l00692"></a>00692 
<a name="l00693"></a>00693   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T&gt;
<a name="l00694"></a><a class="code" href="classr3_1_1Line.html">00694</a>     <span class="keyword">class </span><a class="code" href="classr3_1_1Line.html">Line</a>  {
<a name="l00695"></a>00695   <span class="keyword">public</span>:
<a name="l00696"></a>00696 
<a name="l00697"></a><a class="code" href="classr3_1_1Line.html#a091e043c006784c914a1df8458dc10eb">00697</a>     <a class="code" href="classr3_1_1Line.html#a091e043c006784c914a1df8458dc10eb">Line</a>() {
<a name="l00698"></a>00698       <a class="code" href="classr3_1_1Line.html#aad32a3f724035dc821b4148bd0ebdd1e">SetValue</a>(<a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(0,0,0),<a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(0,0,1));
<a name="l00699"></a>00699     }
<a name="l00700"></a>00700 
<a name="l00701"></a><a class="code" href="classr3_1_1Line.html#a91b6bd97e464504040f43156c1ee3627">00701</a>     <a class="code" href="classr3_1_1Line.html#a91b6bd97e464504040f43156c1ee3627">Line</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; p0, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;p1) {
<a name="l00702"></a>00702       <a class="code" href="classr3_1_1Line.html#aad32a3f724035dc821b4148bd0ebdd1e">SetValue</a>(p0,p1);
<a name="l00703"></a>00703     }
<a name="l00704"></a>00704 
<a name="l00705"></a><a class="code" href="classr3_1_1Line.html#aad32a3f724035dc821b4148bd0ebdd1e">00705</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Line.html#aad32a3f724035dc821b4148bd0ebdd1e">SetValue</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;p0, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;p1) {
<a name="l00706"></a>00706       <a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a> = p0;
<a name="l00707"></a>00707       <a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a> = p1-p0;
<a name="l00708"></a>00708       <a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>.normalize();
<a name="l00709"></a>00709     }
<a name="l00710"></a>00710 
<a name="l00711"></a><a class="code" href="classr3_1_1Line.html#a138806825935227f46b16658a702e849">00711</a>     <span class="keywordtype">bool</span> <a class="code" href="classr3_1_1Line.html#a138806825935227f46b16658a702e849">GetClosestPoints</a>(<span class="keyword">const</span> <a class="code" href="classr3_1_1Line.html">Line</a> &amp;line2, <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;pointOnThis, <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;pointOnThat) {
<a name="l00712"></a>00712 
<a name="l00713"></a>00713       <span class="comment">// quick check to see if parallel -- if so, quit.</span>
<a name="l00714"></a>00714       <span class="keywordflow">if</span>(fabs(<a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>.dot(line2.<a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>)) == 1.0)
<a name="l00715"></a>00715         <span class="keywordflow">return</span> 0;
<a name="l00716"></a>00716       <a class="code" href="classr3_1_1Line.html">Line</a> l2 = line2;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718       <span class="comment">// Algorithm: Brian Jean</span>
<a name="l00719"></a>00719       <span class="comment">//</span>
<a name="l00720"></a>00720       <span class="keyword">register</span> T u;
<a name="l00721"></a>00721       <span class="keyword">register</span> T v;
<a name="l00722"></a>00722       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> Vr = <a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>;
<a name="l00723"></a>00723       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> Vs = l2.<a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>;
<a name="l00724"></a>00724       <span class="keyword">register</span> T Vr_Dot_Vs = Vr.dot(Vs);
<a name="l00725"></a>00725       <span class="keyword">register</span> T detA = T(1.0 - (Vr_Dot_Vs * Vr_Dot_Vs));
<a name="l00726"></a>00726       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> C = l2.<a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a> - <a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a>;
<a name="l00727"></a>00727       <span class="keyword">register</span> T C_Dot_Vr =  C.dot(Vr);
<a name="l00728"></a>00728       <span class="keyword">register</span> T C_Dot_Vs =  C.dot(Vs);
<a name="l00729"></a>00729 
<a name="l00730"></a>00730       u = (C_Dot_Vr - Vr_Dot_Vs * C_Dot_Vs)/detA;
<a name="l00731"></a>00731       v = (C_Dot_Vr * Vr_Dot_Vs - C_Dot_Vs)/detA;
<a name="l00732"></a>00732 
<a name="l00733"></a>00733       pointOnThis = <a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a>;
<a name="l00734"></a>00734       pointOnThis += <a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a> * u;
<a name="l00735"></a>00735       pointOnThat = l2.<a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a>;
<a name="l00736"></a>00736       pointOnThat += l2.<a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a> * v;
<a name="l00737"></a>00737 
<a name="l00738"></a>00738       <span class="keywordflow">return</span> 1;
<a name="l00739"></a>00739     }
<a name="l00740"></a>00740 
<a name="l00741"></a><a class="code" href="classr3_1_1Line.html#a00a2d9ad767b69674c46f331ff735776">00741</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="classr3_1_1Line.html#a00a2d9ad767b69674c46f331ff735776">GetClosestPoint</a>(<span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;point) {
<a name="l00742"></a>00742       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> np = point - <a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a>;
<a name="l00743"></a>00743       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> rp = <a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>*<a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>.dot(np)+<a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a>;
<a name="l00744"></a>00744       <span class="keywordflow">return</span> rp;
<a name="l00745"></a>00745     }
<a name="l00746"></a>00746 
<a name="l00747"></a><a class="code" href="classr3_1_1Line.html#a7b344f8e352995b2c54fbbe904054ec7">00747</a>     <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; <a class="code" href="classr3_1_1Line.html#a7b344f8e352995b2c54fbbe904054ec7">GetPosition</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a>;}
<a name="l00748"></a>00748 
<a name="l00749"></a><a class="code" href="classr3_1_1Line.html#af321fca9a4f6956c0fa3905cb9ed74ee">00749</a>     <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; <a class="code" href="classr3_1_1Line.html#af321fca9a4f6956c0fa3905cb9ed74ee">GetDirection</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>;}
<a name="l00750"></a>00750 
<a name="l00751"></a>00751     <span class="comment">//protected:</span>
<a name="l00752"></a><a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">00752</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="classr3_1_1Line.html#a7dd48f7f2c116d12ec80090c1a86deac">position</a>;
<a name="l00753"></a><a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">00753</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="classr3_1_1Line.html#a627ee1a1623856b473bc9d53b5197e64">direction</a>;
<a name="l00754"></a>00754   };
<a name="l00755"></a>00755 
<a name="l00756"></a>00756 
<a name="l00757"></a>00757   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00758"></a><a class="code" href="structr3_1_1LineSegment2.html">00758</a>   <span class="keyword">struct </span><a class="code" href="structr3_1_1LineSegment2.html">LineSegment2</a> {
<a name="l00759"></a><a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">00759</a>     <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> <a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>, <a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">b</a>;
<a name="l00760"></a><a class="code" href="structr3_1_1LineSegment2.html#ad7756c5d3e6de06abc75e9583dfe3b82">00760</a>     <a class="code" href="structr3_1_1LineSegment2.html#ad7756c5d3e6de06abc75e9583dfe3b82">LineSegment2</a>() {}
<a name="l00761"></a><a class="code" href="structr3_1_1LineSegment2.html#ad86cfff8f1ffeba21f8c365c32c275e8">00761</a>     <a class="code" href="structr3_1_1LineSegment2.html#ad7756c5d3e6de06abc75e9583dfe3b82">LineSegment2</a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; ptA, <span class="keyword">const</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;T&gt;</a> &amp; ptB )
<a name="l00762"></a>00762     : <a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>( ptA ), <a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">b</a>( ptB ) {}
<a name="l00763"></a><a class="code" href="structr3_1_1LineSegment2.html#ab830c7de6499e668c6dfc559493ebd94">00763</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="structr3_1_1LineSegment2.html#ab830c7de6499e668c6dfc559493ebd94">GetPlane</a>()<span class="keyword"> const </span>{ <span class="comment">// not normalized</span>
<a name="l00764"></a>00764       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> p;
<a name="l00765"></a>00765       p.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> = <a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>.y - <a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">b</a>.y;
<a name="l00766"></a>00766       p.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> = <a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">b</a>.x - <a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>.x;
<a name="l00767"></a>00767       p.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> = - ( p.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>.x + p.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>.y );
<a name="l00768"></a>00768       <span class="keywordflow">return</span> p;
<a name="l00769"></a>00769     }
<a name="l00770"></a>00770   };
<a name="l00771"></a>00771 
<a name="l00772"></a>00772   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00773"></a><a class="code" href="namespacer3.html#a6d2071b8041c54d3d293118deeb80a59">00773</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#a6d2071b8041c54d3d293118deeb80a59">Intersect</a>( <span class="keyword">const</span> <a class="code" href="structr3_1_1LineSegment2.html">LineSegment2&lt;T&gt;</a> &amp; s0, <span class="keyword">const</span> <a class="code" href="structr3_1_1LineSegment2.html">LineSegment2&lt;T&gt;</a> &amp; s1 ) {
<a name="l00774"></a>00774     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> p = s0.<a class="code" href="structr3_1_1LineSegment2.html#ab830c7de6499e668c6dfc559493ebd94">GetPlane</a>();
<a name="l00775"></a>00775     <span class="keywordflow">if</span> ( p.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( s1.<a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>.x, s1.<a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>.y, 1 ) ) * p.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( s1.<a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">b</a>.x, s1.<a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">b</a>.y, 1 ) ) &gt; 0 ) {
<a name="l00776"></a>00776       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00777"></a>00777     }
<a name="l00778"></a>00778     p = s1.<a class="code" href="structr3_1_1LineSegment2.html#ab830c7de6499e668c6dfc559493ebd94">GetPlane</a>();
<a name="l00779"></a>00779     <span class="keywordflow">if</span> ( p.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( s0.<a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>.x, s0.<a class="code" href="structr3_1_1LineSegment2.html#a7d8604e329f6b0b8645ac38fbeaa2814">a</a>.y, 1 ) ) * p.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( s0.<a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">b</a>.x, s0.<a class="code" href="structr3_1_1LineSegment2.html#a58f161b582e73c2b276bb18134e2b8e1">b</a>.y, 1 ) ) &gt; 0 ) {
<a name="l00780"></a>00780       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00783"></a>00783   }
<a name="l00784"></a>00784 
<a name="l00785"></a>00785 
<a name="l00786"></a>00786 
<a name="l00787"></a>00787 
<a name="l00788"></a>00788 
<a name="l00789"></a>00789 
<a name="l00790"></a>00790 
<a name="l00791"></a>00791 
<a name="l00792"></a>00792 
<a name="l00793"></a>00793   <span class="comment">// Matrix3</span>
<a name="l00794"></a>00794   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00795"></a><a class="code" href="classr3_1_1Matrix3.html">00795</a>   <span class="keyword">class </span><a class="code" href="classr3_1_1Matrix3.html">Matrix3</a> {
<a name="l00796"></a>00796   <span class="keyword">public</span>:
<a name="l00797"></a><a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">00797</a>     T <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[3][3];
<a name="l00798"></a>00798 
<a name="l00799"></a><a class="code" href="classr3_1_1Matrix3.html#ac88f19119309682d095019d8440d220a">00799</a>     <a class="code" href="classr3_1_1Matrix3.html#ac88f19119309682d095019d8440d220a">Matrix3</a>() {
<a name="l00800"></a>00800       <a class="code" href="classr3_1_1Matrix3.html#a809b7b33c17c0fbe8ba2cf7a4ed1a385">MakeIdentity</a>();
<a name="l00801"></a>00801     }
<a name="l00802"></a>00802 
<a name="l00803"></a>00803     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> TIN&gt;
<a name="l00804"></a><a class="code" href="classr3_1_1Matrix3.html#a64e172e4e39c985f314be5cfb1827daf">00804</a>     <a class="code" href="classr3_1_1Matrix3.html#a64e172e4e39c985f314be5cfb1827daf">Matrix3</a>( <span class="keyword">const</span> TIN * in ) {
<a name="l00805"></a>00805       <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][0] = in[0];  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][1] = in[1];  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][2] = in[2];
<a name="l00806"></a>00806       <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][0] = in[3];  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][1] = in[4];  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][2] = in[5];
<a name="l00807"></a>00807       <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][0] = in[6];  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][1] = in[7];  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][2] = in[8];
<a name="l00808"></a>00808     }
<a name="l00809"></a>00809 
<a name="l00810"></a><a class="code" href="classr3_1_1Matrix3.html#a809b7b33c17c0fbe8ba2cf7a4ed1a385">00810</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix3.html#a809b7b33c17c0fbe8ba2cf7a4ed1a385">MakeIdentity</a>() {
<a name="l00811"></a>00811       <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][0] = 1;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][1] = 0;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][2] = 0;
<a name="l00812"></a>00812       <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][0] = 0;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][1] = 1;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][2] = 0;
<a name="l00813"></a>00813       <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][0] = 0;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][1] = 0;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][2] = 1;
<a name="l00814"></a>00814     }
<a name="l00815"></a>00815 
<a name="l00816"></a><a class="code" href="classr3_1_1Matrix3.html#a2e6fc5abb3e7fa02fafa240787be75c1">00816</a>     <a class="code" href="classr3_1_1Matrix3.html">Matrix3</a> <a class="code" href="classr3_1_1Matrix3.html#a2e6fc5abb3e7fa02fafa240787be75c1">Adjugate</a>()<span class="keyword"> const </span>{
<a name="l00817"></a>00817       <a class="code" href="classr3_1_1Matrix3.html">Matrix3</a> m3;
<a name="l00818"></a>00818       <span class="keywordtype">int</span> L[3] = { 1, 0, 0 };
<a name="l00819"></a>00819       <span class="keywordtype">int</span> G[3] = { 2, 2, 1 };
<a name="l00820"></a>00820       <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> row = 0; row &lt; 3; row++ ) {
<a name="l00821"></a>00821         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> col = 0; col &lt; 3; col++ ) {
<a name="l00822"></a>00822           T t
<a name="l00823"></a>00823           = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[ L[row] ][ L[col] ] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[ G[row] ][ G[col] ]
<a name="l00824"></a>00824           - <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[ G[row] ][ L[col] ] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[ L[row] ][ G[col] ];
<a name="l00825"></a>00825 
<a name="l00826"></a>00826           m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[row][col] = ( (row + col ) &amp; 0x1 ) ? -t : t;
<a name="l00827"></a>00827         }
<a name="l00828"></a>00828       }
<a name="l00829"></a>00829       <span class="keywordflow">return</span> m3.<a class="code" href="classr3_1_1Matrix3.html#aceae0f6724086187b460bc218582d9df">Transpose</a>();
<a name="l00830"></a>00830     }
<a name="l00831"></a>00831 
<a name="l00832"></a><a class="code" href="classr3_1_1Matrix3.html#aceae0f6724086187b460bc218582d9df">00832</a>     <a class="code" href="classr3_1_1Matrix3.html">Matrix3</a> <a class="code" href="classr3_1_1Matrix3.html#aceae0f6724086187b460bc218582d9df">Transpose</a>()<span class="keyword"> const </span>{
<a name="l00833"></a>00833       <a class="code" href="classr3_1_1Matrix3.html">Matrix3</a> m3;
<a name="l00834"></a>00834       m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][0] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][0]; m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][0] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][1]; m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][0] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][2];
<a name="l00835"></a>00835       m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][1] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][0]; m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][1] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][1]; m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][1] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][2];
<a name="l00836"></a>00836       m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][2] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][0]; m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][2] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][1]; m3.<a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][2] = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][2];
<a name="l00837"></a>00837       <span class="keywordflow">return</span> m3;
<a name="l00838"></a>00838     }
<a name="l00839"></a>00839 
<a name="l00840"></a><a class="code" href="classr3_1_1Matrix3.html#a610a1546c6c42ade461f4fa56371df00">00840</a>     T <a class="code" href="classr3_1_1Matrix3.html#a610a1546c6c42ade461f4fa56371df00">Determinant</a>()<span class="keyword"> const </span>{
<a name="l00841"></a>00841       T result
<a name="l00842"></a>00842       = <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][0] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][1] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][2]
<a name="l00843"></a>00843       + <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][1] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][2] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][0]
<a name="l00844"></a>00844       + <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][2] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][0] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][1]
<a name="l00845"></a>00845       - <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][0] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][1] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][2]
<a name="l00846"></a>00846       - <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][1] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][2] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][0]
<a name="l00847"></a>00847       - <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][2] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][0] * <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][1];
<a name="l00848"></a>00848       <span class="keywordflow">return</span> result;
<a name="l00849"></a>00849     }
<a name="l00850"></a>00850 
<a name="l00851"></a><a class="code" href="classr3_1_1Matrix3.html#a6060b3b97dac11d753913583e859ce95">00851</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix3.html#a6060b3b97dac11d753913583e859ce95">Div</a>( T t ) {
<a name="l00852"></a>00852       <a class="code" href="classr3_1_1Matrix3.html#a2c76d08dd88f1a762250a3ae041b7784">Mul</a>( T(1.0) / t );
<a name="l00853"></a>00853     }
<a name="l00854"></a>00854 
<a name="l00855"></a><a class="code" href="classr3_1_1Matrix3.html#a2c76d08dd88f1a762250a3ae041b7784">00855</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix3.html#a2c76d08dd88f1a762250a3ae041b7784">Mul</a>( T t ) {
<a name="l00856"></a>00856       <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> row = 0; row &lt; 3; row++ ) {
<a name="l00857"></a>00857         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> col = 0; col &lt; 3; col++ ) {
<a name="l00858"></a>00858           <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[row][col] *= t;
<a name="l00859"></a>00859         }
<a name="l00860"></a>00860       }
<a name="l00861"></a>00861     }
<a name="l00862"></a>00862 
<a name="l00863"></a>00863     <span class="comment">// Cramer&#39;s Rule</span>
<a name="l00864"></a><a class="code" href="classr3_1_1Matrix3.html#a94500af821ede68519169d5ef8b63ed4">00864</a>     <a class="code" href="classr3_1_1Matrix3.html">Matrix3</a> <a class="code" href="classr3_1_1Matrix3.html#a94500af821ede68519169d5ef8b63ed4">Inverse</a>()<span class="keyword"> const </span>{
<a name="l00865"></a>00865       <a class="code" href="classr3_1_1Matrix3.html">Matrix3</a> m3 = <a class="code" href="classr3_1_1Matrix3.html#a2e6fc5abb3e7fa02fafa240787be75c1">Adjugate</a>();
<a name="l00866"></a>00866       m3.<a class="code" href="classr3_1_1Matrix3.html#a6060b3b97dac11d753913583e859ce95">Div</a>( <a class="code" href="classr3_1_1Matrix3.html#a610a1546c6c42ade461f4fa56371df00">Determinant</a>() );
<a name="l00867"></a>00867       <span class="keywordflow">return</span> m3;
<a name="l00868"></a>00868     }
<a name="l00869"></a>00869 
<a name="l00870"></a><a class="code" href="classr3_1_1Matrix3.html#a202e2b28cc27adf29e4129b3a72527e2">00870</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="classr3_1_1Matrix3.html#a202e2b28cc27adf29e4129b3a72527e2">GetRow</a>( <span class="keywordtype">int</span> i )<span class="keyword"> const </span>{
<a name="l00871"></a>00871       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[i][0], m[i][1], m[i][2] );
<a name="l00872"></a>00872     }
<a name="l00873"></a>00873 
<a name="l00874"></a><a class="code" href="classr3_1_1Matrix3.html#a80f7d53ef0b62b884ae490ab1171d700">00874</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix3.html#a80f7d53ef0b62b884ae490ab1171d700">SetRow</a>( <span class="keywordtype">int</span> i, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;v ) {
<a name="l00875"></a>00875       <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[i][0] = v.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[i][1] = v.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[i][2] = v.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>;
<a name="l00876"></a>00876     }
<a name="l00877"></a>00877 
<a name="l00878"></a><a class="code" href="classr3_1_1Matrix3.html#a2957b1d696f91c6896849a8f0c11b2df">00878</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="classr3_1_1Matrix3.html#a2957b1d696f91c6896849a8f0c11b2df">GetColumn</a>( <span class="keywordtype">int</span> i )<span class="keyword"> const </span>{
<a name="l00879"></a>00879       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][i], m[1][i], m[2][i] );
<a name="l00880"></a>00880     }
<a name="l00881"></a>00881 
<a name="l00882"></a><a class="code" href="classr3_1_1Matrix3.html#a2c6f9d49376f03206c12a971d0393421">00882</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix3.html#a2c6f9d49376f03206c12a971d0393421">SetColumn</a>( <span class="keywordtype">int</span> i, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;v ) {
<a name="l00883"></a>00883       <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[0][i] = v.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[1][i] = v.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>;  <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[2][i] = v.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>;
<a name="l00884"></a>00884     }
<a name="l00885"></a>00885 
<a name="l00886"></a><a class="code" href="classr3_1_1Matrix3.html#a73f57564abc5b46ff97b92d8c8314a12">00886</a>     T &amp; <a class="code" href="classr3_1_1Matrix3.html#a73f57564abc5b46ff97b92d8c8314a12">operator() </a>( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> col ) {
<a name="l00887"></a>00887       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[row][col];
<a name="l00888"></a>00888     }
<a name="l00889"></a>00889 
<a name="l00890"></a><a class="code" href="classr3_1_1Matrix3.html#a4e42f9d69da05fad187426d6fa8ac729">00890</a>     <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Matrix3.html#a73f57564abc5b46ff97b92d8c8314a12">operator() </a>( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> col )<span class="keyword"> const </span>{
<a name="l00891"></a>00891       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix3.html#aa70f25cafdda3998e5a3ca82f353923c">m</a>[row][col];
<a name="l00892"></a>00892     }
<a name="l00893"></a>00893   };
<a name="l00894"></a>00894 
<a name="l00895"></a>00895   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l00896"></a><a class="code" href="namespacer3.html#a2b232e2ae382764e205822839be2706a">00896</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;T&gt;</a> &amp;m, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;v) {
<a name="l00897"></a>00897     <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(m(0,0) * v.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> + m(0,1) * v.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> + m(0,2) * v.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>,
<a name="l00898"></a>00898              m(1,0) * v.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> + m(1,1) * v.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> + m(1,2) * v.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>,
<a name="l00899"></a>00899              m(2,0) * v.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> + m(2,1) * v.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> + m(2,2) * v.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>);
<a name="l00900"></a>00900   }
<a name="l00901"></a>00901 
<a name="l00902"></a>00902 
<a name="l00903"></a>00903 
<a name="l00904"></a>00904 
<a name="l00905"></a>00905 
<a name="l00906"></a>00906 
<a name="l00907"></a>00907 
<a name="l00908"></a>00908 
<a name="l00909"></a>00909 
<a name="l00910"></a>00910 
<a name="l00911"></a>00911 
<a name="l00912"></a>00912 
<a name="l00913"></a>00913 
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 
<a name="l00916"></a>00916 
<a name="l00917"></a>00917   <span class="comment">// Matrix4</span>
<a name="l00918"></a>00918 
<a name="l00919"></a>00919   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T&gt;
<a name="l00920"></a><a class="code" href="classr3_1_1Matrix4.html">00920</a>   <span class="keyword">class </span><a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> {
<a name="l00921"></a>00921 
<a name="l00922"></a>00922   <span class="keyword">public</span>:
<a name="l00923"></a>00923 
<a name="l00924"></a><a class="code" href="classr3_1_1Matrix4.html#a256e3bacc89eb7642a5295a6cd47c481">00924</a>     <a class="code" href="classr3_1_1Matrix4.html#a256e3bacc89eb7642a5295a6cd47c481">Matrix4</a>() { <a class="code" href="classr3_1_1Matrix4.html#af10460f28946816ef32e178e0e781182">MakeIdentity</a>(); }
<a name="l00925"></a>00925 
<a name="l00926"></a><a class="code" href="classr3_1_1Matrix4.html#a50d4ab23c8083afe9c09737812f49032">00926</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> R&gt; <a class="code" href="classr3_1_1Matrix4.html#a50d4ab23c8083afe9c09737812f49032">Matrix4</a>( <span class="keyword">const</span> R * <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a> ) { <a class="code" href="classr3_1_1Matrix4.html#af19a6408a28b9b0228dcc7dc9c65affa">SetValue</a>(m); }
<a name="l00927"></a>00927 
<a name="l00928"></a><a class="code" href="classr3_1_1Matrix4.html#aba89f6d7c38154bdbffd581b40d07caa">00928</a>     <a class="code" href="classr3_1_1Matrix4.html#a256e3bacc89eb7642a5295a6cd47c481">Matrix4</a>( T a00, T a01, T a02, T a03,
<a name="l00929"></a>00929         T a10, T a11, T a12, T a13,
<a name="l00930"></a>00930         T a20, T a21, T a22, T a23,
<a name="l00931"></a>00931         T a30, T a31, T a32, T a33 ) {
<a name="l00932"></a>00932       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) = a00;
<a name="l00933"></a>00933       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,1) = a01;
<a name="l00934"></a>00934       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,2) = a02;
<a name="l00935"></a>00935       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,3) = a03;
<a name="l00936"></a>00936 
<a name="l00937"></a>00937       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,0) = a10;
<a name="l00938"></a>00938       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) = a11;
<a name="l00939"></a>00939       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,2) = a12;
<a name="l00940"></a>00940       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,3) = a13;
<a name="l00941"></a>00941 
<a name="l00942"></a>00942       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,0) = a20;
<a name="l00943"></a>00943       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,1) = a21;
<a name="l00944"></a>00944       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) = a22;
<a name="l00945"></a>00945       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,3) = a23;
<a name="l00946"></a>00946 
<a name="l00947"></a>00947       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,0) = a30;
<a name="l00948"></a>00948       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,1) = a31;
<a name="l00949"></a>00949       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,2) = a32;
<a name="l00950"></a>00950       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,3) = a33;
<a name="l00951"></a>00951     }
<a name="l00952"></a>00952 
<a name="l00953"></a>00953 
<a name="l00954"></a><a class="code" href="classr3_1_1Matrix4.html#a47787399b118b6df8074efd264dce662">00954</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a47787399b118b6df8074efd264dce662">GetValue</a>( T * mp )<span class="keyword"> const </span>{
<a name="l00955"></a>00955       <span class="keywordtype">int</span> c = 0;
<a name="l00956"></a>00956       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j &lt; 4; j++)
<a name="l00957"></a>00957         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; 4; i++)
<a name="l00958"></a>00958           mp[c++] = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(i,j);
<a name="l00959"></a>00959     }
<a name="l00960"></a>00960 
<a name="l00961"></a>00961 
<a name="l00962"></a><a class="code" href="classr3_1_1Matrix4.html#a15d23e2e06ee9cd1937b753f8b133115">00962</a>     <span class="keyword">const</span> T * <a class="code" href="classr3_1_1Matrix4.html#a15d23e2e06ee9cd1937b753f8b133115">GetValue</a>()<span class="keyword"> const  </span>{
<a name="l00963"></a>00963       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l00964"></a>00964     }
<a name="l00965"></a>00965 
<a name="l00966"></a><a class="code" href="classr3_1_1Matrix4.html#af19a6408a28b9b0228dcc7dc9c65affa">00966</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> R&gt; <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#af19a6408a28b9b0228dcc7dc9c65affa">SetValue</a>( <span class="keyword">const</span> R * mp) {
<a name="l00967"></a>00967       <span class="keywordtype">int</span> c = 0;
<a name="l00968"></a>00968       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j &lt; 4; j++)
<a name="l00969"></a>00969         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; 4; i++)
<a name="l00970"></a>00970           <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(i,j) = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(mp[c++]);
<a name="l00971"></a>00971     }
<a name="l00972"></a>00972 
<a name="l00973"></a><a class="code" href="classr3_1_1Matrix4.html#a2136cd3ee474b18d208bd94d4a5b85a3">00973</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a2136cd3ee474b18d208bd94d4a5b85a3">SetValue</a>( T r ) {
<a name="l00974"></a>00974       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; 4; i++)
<a name="l00975"></a>00975         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j &lt; 4; j++)
<a name="l00976"></a>00976           <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(i,j) = r;
<a name="l00977"></a>00977     }
<a name="l00978"></a>00978 
<a name="l00979"></a><a class="code" href="classr3_1_1Matrix4.html#af10460f28946816ef32e178e0e781182">00979</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#af10460f28946816ef32e178e0e781182">MakeIdentity</a>() {
<a name="l00980"></a>00980       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) = 1.0;
<a name="l00981"></a>00981       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,1) = 0.0;
<a name="l00982"></a>00982       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,2) = 0.0;
<a name="l00983"></a>00983       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,3) = 0.0;
<a name="l00984"></a>00984 
<a name="l00985"></a>00985       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,0) = 0.0;
<a name="l00986"></a>00986       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) = 1.0;
<a name="l00987"></a>00987       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,2) = 0.0;
<a name="l00988"></a>00988       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,3) = 0.0;
<a name="l00989"></a>00989 
<a name="l00990"></a>00990       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,0) = 0.0;
<a name="l00991"></a>00991       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,1) = 0.0;
<a name="l00992"></a>00992       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) = 1.0;
<a name="l00993"></a>00993       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,3) = 0.0;
<a name="l00994"></a>00994 
<a name="l00995"></a>00995       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,0) = 0.0;
<a name="l00996"></a>00996       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,1) = 0.0;
<a name="l00997"></a>00997       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,2) = 0.0;
<a name="l00998"></a>00998       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,3) = 1.0;
<a name="l00999"></a>00999     }
<a name="l01000"></a>01000 
<a name="l01001"></a>01001 
<a name="l01002"></a><a class="code" href="classr3_1_1Matrix4.html#a754af7d204cda93725f1c14efbb8f00a">01002</a>     <span class="keyword">static</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#a754af7d204cda93725f1c14efbb8f00a">Identity</a>() {
<a name="l01003"></a>01003       <span class="keyword">static</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> mident (
<a name="l01004"></a>01004                    1.0, 0.0, 0.0, 0.0,
<a name="l01005"></a>01005                    0.0, 1.0, 0.0, 0.0,
<a name="l01006"></a>01006                    0.0, 0.0, 1.0, 0.0,
<a name="l01007"></a>01007                    0.0, 0.0, 0.0, 1.0  );
<a name="l01008"></a>01008       <span class="keywordflow">return</span> mident;
<a name="l01009"></a>01009     }
<a name="l01010"></a>01010 
<a name="l01011"></a><a class="code" href="classr3_1_1Matrix4.html#aa42276b9e6b400cb1ff00c4be873be73">01011</a>     <span class="keyword">static</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#aa42276b9e6b400cb1ff00c4be873be73">Scale</a>( T s ) {
<a name="l01012"></a>01012       <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l01013"></a>01013       m.<a class="code" href="classr3_1_1Matrix4.html#a7730f2f12ae5d2c4779a8c8a8c59349c">SetScale</a>( s );
<a name="l01014"></a>01014       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l01015"></a>01015     }
<a name="l01016"></a>01016 
<a name="l01017"></a><a class="code" href="classr3_1_1Matrix4.html#a0b1a4a47e6f958c2838f375572490f08">01017</a>     <span class="keyword">static</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#a0b1a4a47e6f958c2838f375572490f08">Scale</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> s ) {
<a name="l01018"></a>01018       <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l01019"></a>01019       m.<a class="code" href="classr3_1_1Matrix4.html#a7730f2f12ae5d2c4779a8c8a8c59349c">SetScale</a>( s );
<a name="l01020"></a>01020       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l01021"></a>01021     }
<a name="l01022"></a>01022 
<a name="l01023"></a><a class="code" href="classr3_1_1Matrix4.html#a3f1dc515e224306b16c766711669dee3">01023</a>     <span class="keyword">static</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#a3f1dc515e224306b16c766711669dee3">Translate</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> t ) {
<a name="l01024"></a>01024       <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l01025"></a>01025       m.<a class="code" href="classr3_1_1Matrix4.html#a47c82e876cb2ce3dbc3d77c82d874c69">SetTranslate</a>( t );
<a name="l01026"></a>01026       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l01027"></a>01027     }
<a name="l01028"></a>01028 
<a name="l01029"></a><a class="code" href="classr3_1_1Matrix4.html#a7730f2f12ae5d2c4779a8c8a8c59349c">01029</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a7730f2f12ae5d2c4779a8c8a8c59349c">SetScale</a>( T s ) {
<a name="l01030"></a>01030       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) = s;
<a name="l01031"></a>01031       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) = s;
<a name="l01032"></a>01032       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) = s;
<a name="l01033"></a>01033     }
<a name="l01034"></a>01034 
<a name="l01035"></a><a class="code" href="classr3_1_1Matrix4.html#a754100e2b27f88588d3e40dd047a3eee">01035</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a754100e2b27f88588d3e40dd047a3eee">SetScale</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; s ) {
<a name="l01036"></a>01036       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) = s.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>;
<a name="l01037"></a>01037       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) = s.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>;
<a name="l01038"></a>01038       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) = s.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>;
<a name="l01039"></a>01039     }
<a name="l01040"></a>01040 
<a name="l01041"></a>01041 
<a name="l01042"></a><a class="code" href="classr3_1_1Matrix4.html#a47c82e876cb2ce3dbc3d77c82d874c69">01042</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a47c82e876cb2ce3dbc3d77c82d874c69">SetTranslate</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; t )  {
<a name="l01043"></a>01043       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,3) = t.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>;
<a name="l01044"></a>01044       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,3) = t.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>;
<a name="l01045"></a>01045       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,3) = t.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>;
<a name="l01046"></a>01046     }
<a name="l01047"></a>01047 
<a name="l01048"></a><a class="code" href="classr3_1_1Matrix4.html#a62412c14ce2fab3b7f79245a1108e75f">01048</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a62412c14ce2fab3b7f79245a1108e75f">SetRow</a>(<span class="keywordtype">int</span> r, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; t) {
<a name="l01049"></a>01049       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(r,0) = t.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>;
<a name="l01050"></a>01050       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(r,1) = t.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>;
<a name="l01051"></a>01051       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(r,2) = t.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>;
<a name="l01052"></a>01052       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(r,3) = t.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>;
<a name="l01053"></a>01053     }
<a name="l01054"></a>01054 
<a name="l01055"></a><a class="code" href="classr3_1_1Matrix4.html#a1fc5102e3937c27c765daa95dce0293c">01055</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a1fc5102e3937c27c765daa95dce0293c">SetColumn</a>(<span class="keywordtype">int</span> c, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; t) {
<a name="l01056"></a>01056       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,c) = t.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>;
<a name="l01057"></a>01057       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,c) = t.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>;
<a name="l01058"></a>01058       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,c) = t.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>;
<a name="l01059"></a>01059       <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,c) = t.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a>;
<a name="l01060"></a>01060     }
<a name="l01061"></a>01061 
<a name="l01062"></a>01062 
<a name="l01063"></a><a class="code" href="classr3_1_1Matrix4.html#acc35a2c52d44772ac4b3757521529b55">01063</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#acc35a2c52d44772ac4b3757521529b55">GetRow</a>(<span class="keywordtype">int</span> r, <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; t)<span class="keyword"> const </span>{
<a name="l01064"></a>01064       t.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(r,0);
<a name="l01065"></a>01065       t.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(r,1);
<a name="l01066"></a>01066       t.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(r,2);
<a name="l01067"></a>01067       t.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(r,3);
<a name="l01068"></a>01068     }
<a name="l01069"></a>01069 
<a name="l01070"></a><a class="code" href="classr3_1_1Matrix4.html#af375ba3ccd17e9340296198a566f5722">01070</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="classr3_1_1Matrix4.html#af375ba3ccd17e9340296198a566f5722">GetRow</a>(<span class="keywordtype">int</span> r)<span class="keyword"> const </span>{
<a name="l01071"></a>01071       <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> v; <a class="code" href="classr3_1_1Matrix4.html#acc35a2c52d44772ac4b3757521529b55">GetRow</a>(r, v);
<a name="l01072"></a>01072       <span class="keywordflow">return</span> v;
<a name="l01073"></a>01073     }
<a name="l01074"></a>01074 
<a name="l01075"></a><a class="code" href="classr3_1_1Matrix4.html#a95145fd11360711838f6dcc2a6ebf685">01075</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a95145fd11360711838f6dcc2a6ebf685">GetColumn</a>(<span class="keywordtype">int</span> c, <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; t)<span class="keyword"> const </span>{
<a name="l01076"></a>01076       t.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,c);
<a name="l01077"></a>01077       t.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,c);
<a name="l01078"></a>01078       t.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,c);
<a name="l01079"></a>01079       t.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,c);
<a name="l01080"></a>01080     }
<a name="l01081"></a>01081 
<a name="l01082"></a><a class="code" href="classr3_1_1Matrix4.html#ac134cd7f29070453f765471d09136c2f">01082</a>     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="classr3_1_1Matrix4.html#ac134cd7f29070453f765471d09136c2f">GetColumn</a>(<span class="keywordtype">int</span> c)<span class="keyword"> const </span>{
<a name="l01083"></a>01083       <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> v; <a class="code" href="classr3_1_1Matrix4.html#a95145fd11360711838f6dcc2a6ebf685">GetColumn</a>(c, v);
<a name="l01084"></a>01084       <span class="keywordflow">return</span> v;
<a name="l01085"></a>01085     }
<a name="l01086"></a>01086 
<a name="l01087"></a><a class="code" href="classr3_1_1Matrix4.html#a73493f0f5477529cd7796c074f25bae8">01087</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#a73493f0f5477529cd7796c074f25bae8">Inverse</a>()<span class="keyword"> const </span>{
<a name="l01088"></a>01088       <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> minv;
<a name="l01089"></a>01089 
<a name="l01090"></a>01090       T r1[8], r2[8], r3[8], r4[8];
<a name="l01091"></a>01091       T *s[4], *tmprow;
<a name="l01092"></a>01092 
<a name="l01093"></a>01093       s[0] = &amp;r1[0];
<a name="l01094"></a>01094       s[1] = &amp;r2[0];
<a name="l01095"></a>01095       s[2] = &amp;r3[0];
<a name="l01096"></a>01096       s[3] = &amp;r4[0];
<a name="l01097"></a>01097 
<a name="l01098"></a>01098       <span class="keyword">register</span> <span class="keywordtype">int</span> i,j,p,jj;
<a name="l01099"></a>01099       <span class="keywordflow">for</span>(i=0;i&lt;4;i++)
<a name="l01100"></a>01100       {
<a name="l01101"></a>01101         <span class="keywordflow">for</span>(j=0;j&lt;4;j++)
<a name="l01102"></a>01102         {
<a name="l01103"></a>01103           s[i][j] = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(i,j);
<a name="l01104"></a>01104           <span class="keywordflow">if</span>(i==j) s[i][j+4] = 1.0;
<a name="l01105"></a>01105           <span class="keywordflow">else</span>     s[i][j+4] = 0.0;
<a name="l01106"></a>01106         }
<a name="l01107"></a>01107       }
<a name="l01108"></a>01108       T scp[4];
<a name="l01109"></a>01109       <span class="keywordflow">for</span>(i=0;i&lt;4;i++)
<a name="l01110"></a>01110       {
<a name="l01111"></a>01111         scp[i] = T(fabs(s[i][0]));
<a name="l01112"></a>01112         <span class="keywordflow">for</span>(j=1;j&lt;4;j++)
<a name="l01113"></a>01113           <span class="keywordflow">if</span>(T(fabs(s[i][j])) &gt; scp[i]) scp[i] = T(fabs(s[i][j]));
<a name="l01114"></a>01114         <span class="keywordflow">if</span>(scp[i] == 0.0) <span class="keywordflow">return</span> minv; <span class="comment">// singular matrix!</span>
<a name="l01115"></a>01115       }
<a name="l01116"></a>01116 
<a name="l01117"></a>01117       <span class="keywordtype">int</span> pivot_to;
<a name="l01118"></a>01118       T scp_max;
<a name="l01119"></a>01119       <span class="keywordflow">for</span>(i=0;i&lt;4;i++)
<a name="l01120"></a>01120       {
<a name="l01121"></a>01121         <span class="comment">// select pivot row</span>
<a name="l01122"></a>01122         pivot_to = i;
<a name="l01123"></a>01123         scp_max = T(fabs(s[i][i]/scp[i]));
<a name="l01124"></a>01124         <span class="comment">// find out which row should be on top</span>
<a name="l01125"></a>01125         <span class="keywordflow">for</span>(p=i+1;p&lt;4;p++)
<a name="l01126"></a>01126           <span class="keywordflow">if</span>(T(fabs(s[p][i]/scp[p])) &gt; scp_max)
<a name="l01127"></a>01127           { scp_max = T(fabs(s[p][i]/scp[p])); pivot_to = p; }
<a name="l01128"></a>01128         <span class="comment">// Pivot if necessary</span>
<a name="l01129"></a>01129         <span class="keywordflow">if</span>(pivot_to != i)
<a name="l01130"></a>01130         {
<a name="l01131"></a>01131           tmprow = s[i];
<a name="l01132"></a>01132           s[i] = s[pivot_to];
<a name="l01133"></a>01133           s[pivot_to] = tmprow;
<a name="l01134"></a>01134           T tmpscp;
<a name="l01135"></a>01135           tmpscp = scp[i];
<a name="l01136"></a>01136           scp[i] = scp[pivot_to];
<a name="l01137"></a>01137           scp[pivot_to] = tmpscp;
<a name="l01138"></a>01138         }
<a name="l01139"></a>01139 
<a name="l01140"></a>01140         T mji;
<a name="l01141"></a>01141         <span class="comment">// perform gaussian elimination</span>
<a name="l01142"></a>01142         <span class="keywordflow">for</span>(j=i+1;j&lt;4;j++)
<a name="l01143"></a>01143         {
<a name="l01144"></a>01144           mji = s[j][i]/s[i][i];
<a name="l01145"></a>01145           s[j][i] = 0.0;
<a name="l01146"></a>01146           <span class="keywordflow">for</span>(jj=i+1;jj&lt;8;jj++)
<a name="l01147"></a>01147             s[j][jj] -= mji*s[i][jj];
<a name="l01148"></a>01148         }
<a name="l01149"></a>01149       }
<a name="l01150"></a>01150       <span class="keywordflow">if</span>(s[3][3] == 0.0) <span class="keywordflow">return</span> minv; <span class="comment">// singular matrix!</span>
<a name="l01151"></a>01151 
<a name="l01152"></a>01152       <span class="comment">//</span>
<a name="l01153"></a>01153       <span class="comment">// Now we have an upper triangular matrix.</span>
<a name="l01154"></a>01154       <span class="comment">//</span>
<a name="l01155"></a>01155       <span class="comment">//  x x x x | y y y y</span>
<a name="l01156"></a>01156       <span class="comment">//  0 x x x | y y y y</span>
<a name="l01157"></a>01157       <span class="comment">//  0 0 x x | y y y y</span>
<a name="l01158"></a>01158       <span class="comment">//  0 0 0 x | y y y y</span>
<a name="l01159"></a>01159       <span class="comment">//</span>
<a name="l01160"></a>01160       <span class="comment">//  we&#39;ll back substitute to get the inverse</span>
<a name="l01161"></a>01161       <span class="comment">//</span>
<a name="l01162"></a>01162       <span class="comment">//  1 0 0 0 | z z z z</span>
<a name="l01163"></a>01163       <span class="comment">//  0 1 0 0 | z z z z</span>
<a name="l01164"></a>01164       <span class="comment">//  0 0 1 0 | z z z z</span>
<a name="l01165"></a>01165       <span class="comment">//  0 0 0 1 | z z z z</span>
<a name="l01166"></a>01166       <span class="comment">//</span>
<a name="l01167"></a>01167 
<a name="l01168"></a>01168       T mij;
<a name="l01169"></a>01169       <span class="keywordflow">for</span>(i=3;i&gt;0;i--)
<a name="l01170"></a>01170       {
<a name="l01171"></a>01171         <span class="keywordflow">for</span>(j=i-1;j &gt; -1; j--)
<a name="l01172"></a>01172         {
<a name="l01173"></a>01173           mij = s[j][i]/s[i][i];
<a name="l01174"></a>01174           <span class="keywordflow">for</span>(jj=j+1;jj&lt;8;jj++)
<a name="l01175"></a>01175             s[j][jj] -= mij*s[i][jj];
<a name="l01176"></a>01176         }
<a name="l01177"></a>01177       }
<a name="l01178"></a>01178 
<a name="l01179"></a>01179       <span class="keywordflow">for</span>(i=0;i&lt;4;i++)
<a name="l01180"></a>01180         <span class="keywordflow">for</span>(j=0;j&lt;4;j++)
<a name="l01181"></a>01181           minv(i,j) = s[i][j+4] / s[i][i];
<a name="l01182"></a>01182 
<a name="l01183"></a>01183       <span class="keywordflow">return</span> minv;
<a name="l01184"></a>01184     }
<a name="l01185"></a>01185 
<a name="l01186"></a>01186 
<a name="l01187"></a><a class="code" href="classr3_1_1Matrix4.html#a8de183ed5608c55ce7c2d05455e26b72">01187</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> <a class="code" href="classr3_1_1Matrix4.html#a8de183ed5608c55ce7c2d05455e26b72">Transpose</a>()<span class="keyword"> const </span>{
<a name="l01188"></a>01188       <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> mtrans;
<a name="l01189"></a>01189 
<a name="l01190"></a>01190       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;4;i++)
<a name="l01191"></a>01191         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;4;j++)
<a name="l01192"></a>01192           mtrans(i,j) = <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(j,i);
<a name="l01193"></a>01193       <span class="keywordflow">return</span> mtrans;
<a name="l01194"></a>01194     }
<a name="l01195"></a>01195 
<a name="l01196"></a><a class="code" href="classr3_1_1Matrix4.html#aa5b8bcf5e2ef4c6c0c02adc5e746ddbb">01196</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; <a class="code" href="classr3_1_1Matrix4.html#aa5b8bcf5e2ef4c6c0c02adc5e746ddbb">MultRight</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; b ) {
<a name="l01197"></a>01197       <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> mt(*<span class="keyword">this</span>);
<a name="l01198"></a>01198       <a class="code" href="classr3_1_1Matrix4.html#af19a6408a28b9b0228dcc7dc9c65affa">SetValue</a>(T(0));
<a name="l01199"></a>01199 
<a name="l01200"></a>01200       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; 4; i++)
<a name="l01201"></a>01201         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j &lt; 4; j++)
<a name="l01202"></a>01202           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c=0; c &lt; 4; c++)
<a name="l01203"></a>01203             <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(i,j) += mt(i,c) * b(c,j);
<a name="l01204"></a>01204       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01205"></a>01205     }
<a name="l01206"></a>01206 
<a name="l01207"></a><a class="code" href="classr3_1_1Matrix4.html#a41eebc00b36cef335d905cc9dd3ec5e9">01207</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; <a class="code" href="classr3_1_1Matrix4.html#a41eebc00b36cef335d905cc9dd3ec5e9">MultLeft</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; b ) {
<a name="l01208"></a>01208       <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> mt(*<span class="keyword">this</span>);
<a name="l01209"></a>01209       <a class="code" href="classr3_1_1Matrix4.html#af19a6408a28b9b0228dcc7dc9c65affa">SetValue</a>(T(0));
<a name="l01210"></a>01210 
<a name="l01211"></a>01211       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; 4; i++)
<a name="l01212"></a>01212         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j &lt; 4; j++)
<a name="l01213"></a>01213           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c=0; c &lt; 4; c++)
<a name="l01214"></a>01214             <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(i,j) += b(i,c) * mt(c,j);
<a name="l01215"></a>01215       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01216"></a>01216     }
<a name="l01217"></a>01217 
<a name="l01218"></a>01218 
<a name="l01219"></a>01219     <span class="comment">// dst = M * src</span>
<a name="l01220"></a><a class="code" href="classr3_1_1Matrix4.html#ac03dadc8921807a3018a711f128ff920">01220</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#ac03dadc8921807a3018a711f128ff920">MultMatrixVec</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;src, <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;dst )<span class="keyword"> const </span>{
<a name="l01221"></a>01221       T w = (
<a name="l01222"></a>01222             src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,0) +
<a name="l01223"></a>01223             src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,1) +
<a name="l01224"></a>01224             src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,2) +
<a name="l01225"></a>01225             <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,3)          );
<a name="l01226"></a>01226 
<a name="l01227"></a>01227       assert(w != <a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a>);
<a name="l01228"></a>01228 
<a name="l01229"></a>01229       dst.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>  = (
<a name="l01230"></a>01230              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) +
<a name="l01231"></a>01231              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,1) +
<a name="l01232"></a>01232              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,2) +
<a name="l01233"></a>01233              <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,3)          ) / w;
<a name="l01234"></a>01234       dst.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>  = (
<a name="l01235"></a>01235              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,0) +
<a name="l01236"></a>01236              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) +
<a name="l01237"></a>01237              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,2) +
<a name="l01238"></a>01238              <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,3)          ) / w;
<a name="l01239"></a>01239       dst.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>  = (
<a name="l01240"></a>01240              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,0) +
<a name="l01241"></a>01241              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,1) +
<a name="l01242"></a>01242              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) +
<a name="l01243"></a>01243              <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,3)          ) / w;
<a name="l01244"></a>01244     }
<a name="l01245"></a>01245 
<a name="l01246"></a><a class="code" href="classr3_1_1Matrix4.html#a5ab79a7a1484bd63a429e56a45845eb0">01246</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a5ab79a7a1484bd63a429e56a45845eb0">MultMatrixVec</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; src_and_dst)<span class="keyword"> const </span>{
<a name="l01247"></a>01247       <a class="code" href="classr3_1_1Matrix4.html#ac03dadc8921807a3018a711f128ff920">MultMatrixVec</a>(<a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(src_and_dst), src_and_dst);
<a name="l01248"></a>01248     }
<a name="l01249"></a>01249 
<a name="l01250"></a>01250 
<a name="l01251"></a>01251     <span class="comment">// dst = src * M</span>
<a name="l01252"></a><a class="code" href="classr3_1_1Matrix4.html#a3443b00a982261ccad3f3f42b8efd6e2">01252</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a3443b00a982261ccad3f3f42b8efd6e2">MultVecMatrix</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;src, <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;dst )<span class="keyword"> const </span>{
<a name="l01253"></a>01253       T w = (
<a name="l01254"></a>01254             src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,3) +
<a name="l01255"></a>01255             src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,3) +
<a name="l01256"></a>01256             src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,3) +
<a name="l01257"></a>01257             <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,3)          );
<a name="l01258"></a>01258 
<a name="l01259"></a>01259       assert(w != <a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a>);
<a name="l01260"></a>01260 
<a name="l01261"></a>01261       dst.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>  = (
<a name="l01262"></a>01262              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) +
<a name="l01263"></a>01263              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,0) +
<a name="l01264"></a>01264              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,0) +
<a name="l01265"></a>01265              <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,0)          ) / w;
<a name="l01266"></a>01266       dst.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>  = (
<a name="l01267"></a>01267              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,1) +
<a name="l01268"></a>01268              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) +
<a name="l01269"></a>01269              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,1) +
<a name="l01270"></a>01270              <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,1)          ) / w;
<a name="l01271"></a>01271       dst.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>  = (
<a name="l01272"></a>01272              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,2) +
<a name="l01273"></a>01273              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,2) +
<a name="l01274"></a>01274              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) +
<a name="l01275"></a>01275              <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,2)          ) / w;
<a name="l01276"></a>01276     }
<a name="l01277"></a>01277 
<a name="l01278"></a>01278 
<a name="l01279"></a><a class="code" href="classr3_1_1Matrix4.html#ae5774d9865341eae7bc80e32111be6d8">01279</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#ae5774d9865341eae7bc80e32111be6d8">MultVecMatrix</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; src_and_dst)<span class="keyword"> const </span>{
<a name="l01280"></a>01280       <a class="code" href="classr3_1_1Matrix4.html#a3443b00a982261ccad3f3f42b8efd6e2">MultVecMatrix</a>(<a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(src_and_dst), src_and_dst);
<a name="l01281"></a>01281     }
<a name="l01282"></a>01282 
<a name="l01283"></a>01283     <span class="comment">// dst = M * src</span>
<a name="l01284"></a><a class="code" href="classr3_1_1Matrix4.html#a9ee153d1ee13b1288b3a8aa8fd3a6d4b">01284</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a9ee153d1ee13b1288b3a8aa8fd3a6d4b">MultMatrixVec</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;src, <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;dst )<span class="keyword"> const </span>{
<a name="l01285"></a>01285       dst.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>  = (
<a name="l01286"></a>01286              src.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) +
<a name="l01287"></a>01287              src.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,1) +
<a name="l01288"></a>01288              src.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,2) +
<a name="l01289"></a>01289              src.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,3));
<a name="l01290"></a>01290       dst.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>  = (
<a name="l01291"></a>01291              src.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,0) +
<a name="l01292"></a>01292              src.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) +
<a name="l01293"></a>01293              src.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,2) +
<a name="l01294"></a>01294              src.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,3));
<a name="l01295"></a>01295       dst.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>  = (
<a name="l01296"></a>01296              src.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,0) +
<a name="l01297"></a>01297              src.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,1) +
<a name="l01298"></a>01298              src.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) +
<a name="l01299"></a>01299              src.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,3));
<a name="l01300"></a>01300       dst.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = (
<a name="l01301"></a>01301             src.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,0) +
<a name="l01302"></a>01302             src.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,1) +
<a name="l01303"></a>01303             src.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,2) +
<a name="l01304"></a>01304             src.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,3));
<a name="l01305"></a>01305     }
<a name="l01306"></a>01306 
<a name="l01307"></a><a class="code" href="classr3_1_1Matrix4.html#a1fcba425017a7d394d8839668336de2d">01307</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a1fcba425017a7d394d8839668336de2d">MultMatrixVec</a>( <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; src_and_dst)<span class="keyword"> const </span>{
<a name="l01308"></a>01308       <a class="code" href="classr3_1_1Matrix4.html#ac03dadc8921807a3018a711f128ff920">MultMatrixVec</a>(<a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a>(src_and_dst), src_and_dst);
<a name="l01309"></a>01309     }
<a name="l01310"></a>01310 
<a name="l01311"></a>01311 
<a name="l01312"></a>01312     <span class="comment">// dst = src * M</span>
<a name="l01313"></a><a class="code" href="classr3_1_1Matrix4.html#a85439402dfc4acc2eb1ee61605daf008">01313</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a85439402dfc4acc2eb1ee61605daf008">MultVecMatrix</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;src, <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;dst )<span class="keyword"> const </span>{
<a name="l01314"></a>01314       dst.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a>  = (
<a name="l01315"></a>01315              src.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) +
<a name="l01316"></a>01316              src.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,0) +
<a name="l01317"></a>01317              src.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,0) +
<a name="l01318"></a>01318              src.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,0));
<a name="l01319"></a>01319       dst.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a>  = (
<a name="l01320"></a>01320              src.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,1) +
<a name="l01321"></a>01321              src.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) +
<a name="l01322"></a>01322              src.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,1) +
<a name="l01323"></a>01323              src.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,1));
<a name="l01324"></a>01324       dst.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a>  = (
<a name="l01325"></a>01325              src.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,2) +
<a name="l01326"></a>01326              src.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,2) +
<a name="l01327"></a>01327              src.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) +
<a name="l01328"></a>01328              src.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,2));
<a name="l01329"></a>01329       dst.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> = (
<a name="l01330"></a>01330             src.<a class="code" href="classr3_1_1Vec4.html#af97ca05705d34a0adc54e15f38f124cb">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,3) +
<a name="l01331"></a>01331             src.<a class="code" href="classr3_1_1Vec4.html#a8d47c691d992bd6cb4fb9181241e4d55">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,3) +
<a name="l01332"></a>01332             src.<a class="code" href="classr3_1_1Vec4.html#af345343fe40e381459f28f66861df748">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,3) +
<a name="l01333"></a>01333             src.<a class="code" href="classr3_1_1Vec4.html#a0baf974d800a30002a825e6a1724b779">w</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,3));
<a name="l01334"></a>01334     }
<a name="l01335"></a>01335 
<a name="l01336"></a>01336 
<a name="l01337"></a><a class="code" href="classr3_1_1Matrix4.html#adce0c9067a87cdb199cbb3c173aa1d9a">01337</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#adce0c9067a87cdb199cbb3c173aa1d9a">MultVecMatrix</a>( <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; src_and_dst)<span class="keyword"> const </span>{
<a name="l01338"></a>01338       <a class="code" href="classr3_1_1Matrix4.html#a3443b00a982261ccad3f3f42b8efd6e2">MultVecMatrix</a>(<a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a>(src_and_dst), src_and_dst);
<a name="l01339"></a>01339     }
<a name="l01340"></a>01340 
<a name="l01341"></a>01341 
<a name="l01342"></a>01342     <span class="comment">// dst = M * src</span>
<a name="l01343"></a><a class="code" href="classr3_1_1Matrix4.html#a99c9c82b6dbe1b843ea8d6cdc486c7bb">01343</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a99c9c82b6dbe1b843ea8d6cdc486c7bb">MultMatrixDir</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;src, <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;dst )<span class="keyword"> const </span>{
<a name="l01344"></a>01344       dst.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>  = (
<a name="l01345"></a>01345              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) +
<a name="l01346"></a>01346              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,1) +
<a name="l01347"></a>01347              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,2) ) ;
<a name="l01348"></a>01348       dst.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>  = (
<a name="l01349"></a>01349              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,0) +
<a name="l01350"></a>01350              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) +
<a name="l01351"></a>01351              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,2) ) ;
<a name="l01352"></a>01352       dst.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>  = (
<a name="l01353"></a>01353              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,0) +
<a name="l01354"></a>01354              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,1) +
<a name="l01355"></a>01355              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) ) ;
<a name="l01356"></a>01356     }
<a name="l01357"></a>01357 
<a name="l01358"></a>01358 
<a name="l01359"></a><a class="code" href="classr3_1_1Matrix4.html#ade6f63f5dbc13a2f9d0c5684bc6a036a">01359</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#ade6f63f5dbc13a2f9d0c5684bc6a036a">MultMatrixDir</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; src_and_dst)<span class="keyword"> const </span>{
<a name="l01360"></a>01360       <a class="code" href="classr3_1_1Matrix4.html#a99c9c82b6dbe1b843ea8d6cdc486c7bb">MultMatrixDir</a>(<a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(src_and_dst), src_and_dst);
<a name="l01361"></a>01361     }
<a name="l01362"></a>01362 
<a name="l01363"></a>01363 
<a name="l01364"></a>01364     <span class="comment">// dst = src * M</span>
<a name="l01365"></a><a class="code" href="classr3_1_1Matrix4.html#a9506bc8c3ce70d10dc6823d2996d56f1">01365</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#a9506bc8c3ce70d10dc6823d2996d56f1">MultDirMatrix</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;src, <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;dst )<span class="keyword"> const </span>{
<a name="l01366"></a>01366       dst.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>  = (
<a name="l01367"></a>01367              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,0) +
<a name="l01368"></a>01368              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,0) +
<a name="l01369"></a>01369              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,0) ) ;
<a name="l01370"></a>01370       dst.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>  = (
<a name="l01371"></a>01371              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,1) +
<a name="l01372"></a>01372              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,1) +
<a name="l01373"></a>01373              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,1) ) ;
<a name="l01374"></a>01374       dst.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>  = (
<a name="l01375"></a>01375              src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,2) +
<a name="l01376"></a>01376              src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,2) +
<a name="l01377"></a>01377              src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,2) ) ;
<a name="l01378"></a>01378     }
<a name="l01379"></a>01379 
<a name="l01380"></a>01380 
<a name="l01381"></a><a class="code" href="classr3_1_1Matrix4.html#ab740e3a19f7ef59f6255b3f89c451058">01381</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Matrix4.html#ab740e3a19f7ef59f6255b3f89c451058">MultDirMatrix</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; src_and_dst)<span class="keyword"> const </span>{
<a name="l01382"></a>01382       <a class="code" href="classr3_1_1Matrix4.html#a9506bc8c3ce70d10dc6823d2996d56f1">MultDirMatrix</a>(<a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(src_and_dst), src_and_dst);
<a name="l01383"></a>01383     }
<a name="l01384"></a>01384 
<a name="l01385"></a><a class="code" href="classr3_1_1Matrix4.html#a0b72591c97a68ed464f16aa5b5888227">01385</a>     T * <a class="code" href="classr3_1_1Matrix4.html#a0b72591c97a68ed464f16aa5b5888227">Ptr</a>() {
<a name="l01386"></a>01386       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l01387"></a>01387     }
<a name="l01388"></a>01388 
<a name="l01389"></a><a class="code" href="classr3_1_1Matrix4.html#a5899050088280158bb78f2e4995caa59">01389</a>     <span class="keyword">const</span> T * <a class="code" href="classr3_1_1Matrix4.html#a5899050088280158bb78f2e4995caa59">Ptr</a>()<span class="keyword"> const </span>{
<a name="l01390"></a>01390       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>;
<a name="l01391"></a>01391     }
<a name="l01392"></a>01392 
<a name="l01393"></a><a class="code" href="classr3_1_1Matrix4.html#a5655ec6c8ff46a6fbe9aa3a4af757f4f">01393</a>     T &amp; <a class="code" href="classr3_1_1Matrix4.html#a5655ec6c8ff46a6fbe9aa3a4af757f4f">operator () </a>(<span class="keywordtype">int</span> row, <span class="keywordtype">int</span> col) {
<a name="l01394"></a>01394       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(row,col);
<a name="l01395"></a>01395     }
<a name="l01396"></a>01396 
<a name="l01397"></a><a class="code" href="classr3_1_1Matrix4.html#a7f892d2d2c67907a362c0d66421d7c0f">01397</a>     <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Matrix4.html#a5655ec6c8ff46a6fbe9aa3a4af757f4f">operator () </a>(<span class="keywordtype">int</span> row, <span class="keywordtype">int</span> col)<span class="keyword"> const </span>{
<a name="l01398"></a>01398       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(row,col);
<a name="l01399"></a>01399     }
<a name="l01400"></a>01400 
<a name="l01401"></a><a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">01401</a>     T &amp; <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a> (<span class="keywordtype">int</span> row, <span class="keywordtype">int</span> col) {
<a name="l01402"></a>01402       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>[row | (col&lt;&lt;2)];
<a name="l01403"></a>01403     }
<a name="l01404"></a>01404 
<a name="l01405"></a><a class="code" href="classr3_1_1Matrix4.html#ab417c86649ed0c83e49f6a7759d5de13">01405</a>     <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Matrix4.html#ab417c86649ed0c83e49f6a7759d5de13">element</a> (<span class="keywordtype">int</span> row, <span class="keywordtype">int</span> col)<span class="keyword"> const </span>{
<a name="l01406"></a>01406       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>[row | (col&lt;&lt;2)];
<a name="l01407"></a>01407     }
<a name="l01408"></a>01408 
<a name="l01409"></a><a class="code" href="classr3_1_1Matrix4.html#a4478384019bc1de9f400cdf0dc38c7bf">01409</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; <a class="code" href="classr3_1_1Matrix4.html#a4478384019bc1de9f400cdf0dc38c7bf">operator *= </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; mat ) {
<a name="l01410"></a>01410       <a class="code" href="classr3_1_1Matrix4.html#aa5b8bcf5e2ef4c6c0c02adc5e746ddbb">MultRight</a>( mat );
<a name="l01411"></a>01411       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01412"></a>01412     }
<a name="l01413"></a>01413 
<a name="l01414"></a><a class="code" href="classr3_1_1Matrix4.html#acec541ed9875eb02dff045d3322e6f5f">01414</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; <a class="code" href="classr3_1_1Matrix4.html#a4478384019bc1de9f400cdf0dc38c7bf">operator *= </a>( <span class="keyword">const</span> T &amp; r ) {
<a name="l01415"></a>01415       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i)
<a name="l01416"></a>01416       {
<a name="l01417"></a>01417         <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,i) *= r;
<a name="l01418"></a>01418         <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,i) *= r;
<a name="l01419"></a>01419         <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,i) *= r;
<a name="l01420"></a>01420         <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,i) *= r;
<a name="l01421"></a>01421       }
<a name="l01422"></a>01422       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01423"></a>01423     }
<a name="l01424"></a>01424 
<a name="l01425"></a><a class="code" href="classr3_1_1Matrix4.html#afc95e1997a32688d51d5cbd306a18140">01425</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; <a class="code" href="classr3_1_1Matrix4.html#afc95e1997a32688d51d5cbd306a18140">operator += </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4</a> &amp; mat ) {
<a name="l01426"></a>01426       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i)
<a name="l01427"></a>01427       {
<a name="l01428"></a>01428         <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,i) += mat.<a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(0,i);
<a name="l01429"></a>01429         <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,i) += mat.<a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(1,i);
<a name="l01430"></a>01430         <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,i) += mat.<a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(2,i);
<a name="l01431"></a>01431         <a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,i) += mat.<a class="code" href="classr3_1_1Matrix4.html#a3d744a4fdc781465b91a592c41aab58d">element</a>(3,i);
<a name="l01432"></a>01432       }
<a name="l01433"></a>01433       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01434"></a>01434     }
<a name="l01435"></a>01435 
<a name="l01436"></a><a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">01436</a>     T <a class="code" href="classr3_1_1Matrix4.html#ad5c43dcd7386d2ba21dcb8b55e7c0707">m</a>[16];
<a name="l01437"></a>01437   };
<a name="l01438"></a>01438 
<a name="l01439"></a>01439   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01440"></a><a class="code" href="namespacer3.html#ab155d821a720569520653f089e803c5d">01440</a>   <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m2 ) {
<a name="l01441"></a>01441     <span class="keyword">static</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> product;
<a name="l01442"></a>01442 
<a name="l01443"></a>01443     product = m1;
<a name="l01444"></a>01444     product.<a class="code" href="classr3_1_1Matrix4.html#aa5b8bcf5e2ef4c6c0c02adc5e746ddbb">MultRight</a>(m2);
<a name="l01445"></a>01445 
<a name="l01446"></a>01446     <span class="keywordflow">return</span> product;
<a name="l01447"></a>01447   }
<a name="l01448"></a>01448 
<a name="l01449"></a>01449   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01450"></a><a class="code" href="namespacer3.html#ab9515b47c0c52da3bef1d9ca5731ec15">01450</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#a8615485ea001c58af7cb1d6b1ee612c8">operator ==</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp;m1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp;m2 ) {
<a name="l01451"></a>01451     <span class="keywordflow">return</span> (
<a name="l01452"></a>01452         m1(0,0) == m2(0,0) &amp;&amp;
<a name="l01453"></a>01453         m1(0,1) == m2(0,1) &amp;&amp;
<a name="l01454"></a>01454         m1(0,2) == m2(0,2) &amp;&amp;
<a name="l01455"></a>01455         m1(0,3) == m2(0,3) &amp;&amp;
<a name="l01456"></a>01456         m1(1,0) == m2(1,0) &amp;&amp;
<a name="l01457"></a>01457         m1(1,1) == m2(1,1) &amp;&amp;
<a name="l01458"></a>01458         m1(1,2) == m2(1,2) &amp;&amp;
<a name="l01459"></a>01459         m1(1,3) == m2(1,3) &amp;&amp;
<a name="l01460"></a>01460         m1(2,0) == m2(2,0) &amp;&amp;
<a name="l01461"></a>01461         m1(2,1) == m2(2,1) &amp;&amp;
<a name="l01462"></a>01462         m1(2,2) == m2(2,2) &amp;&amp;
<a name="l01463"></a>01463         m1(2,3) == m2(2,3) &amp;&amp;
<a name="l01464"></a>01464         m1(3,0) == m2(3,0) &amp;&amp;
<a name="l01465"></a>01465         m1(3,1) == m2(3,1) &amp;&amp;
<a name="l01466"></a>01466         m1(3,2) == m2(3,2) &amp;&amp;
<a name="l01467"></a>01467         m1(3,3) == m2(3,3) );
<a name="l01468"></a>01468   }
<a name="l01469"></a>01469 
<a name="l01470"></a>01470   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01471"></a><a class="code" href="namespacer3.html#ae30045ceb95242b2c3f1f2cbb445c450">01471</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#ad7488bc006398d5a428b892f93be6f78">operator != </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m2 ) {
<a name="l01472"></a>01472     <span class="keywordflow">return</span> !( m1 == m2 );
<a name="l01473"></a>01473   }
<a name="l01474"></a>01474 
<a name="l01475"></a>01475 
<a name="l01476"></a>01476   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01477"></a><a class="code" href="namespacer3.html#a9915b4138deacb88019f29ab09af0efb">01477</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v ) {
<a name="l01478"></a>01478     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> r;
<a name="l01479"></a>01479     m.<a class="code" href="classr3_1_1Matrix4.html#ac03dadc8921807a3018a711f128ff920">MultMatrixVec</a>(v, r);
<a name="l01480"></a>01480     <span class="keywordflow">return</span> r;
<a name="l01481"></a>01481   }
<a name="l01482"></a>01482 
<a name="l01483"></a>01483   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01484"></a><a class="code" href="namespacer3.html#a4bd0606aba1b20c1b2a5d371d3a37b44">01484</a>   <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v ) {
<a name="l01485"></a>01485     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> r;
<a name="l01486"></a>01486     m.<a class="code" href="classr3_1_1Matrix4.html#ac03dadc8921807a3018a711f128ff920">MultMatrixVec</a>(v, r);
<a name="l01487"></a>01487     <span class="keywordflow">return</span> r;
<a name="l01488"></a>01488   }
<a name="l01489"></a>01489 
<a name="l01490"></a>01490 
<a name="l01491"></a>01491   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01492"></a><a class="code" href="namespacer3.html#a06c99b97dc2480e99d4ac98f2db84502">01492</a>   <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; v, <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m ) {
<a name="l01493"></a>01493     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> r;
<a name="l01494"></a>01494     m.<a class="code" href="classr3_1_1Matrix4.html#a3443b00a982261ccad3f3f42b8efd6e2">MultVecMatrix</a>(v, r);
<a name="l01495"></a>01495     <span class="keywordflow">return</span> r;
<a name="l01496"></a>01496   }
<a name="l01497"></a>01497 
<a name="l01498"></a>01498   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01499"></a><a class="code" href="namespacer3.html#ab682117a638bf3dc4c805bc79697d91d">01499</a>   <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp; v, <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m ) {
<a name="l01500"></a>01500     <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;T&gt;</a> r;
<a name="l01501"></a>01501     m.<a class="code" href="classr3_1_1Matrix4.html#a3443b00a982261ccad3f3f42b8efd6e2">MultVecMatrix</a>(v, r);
<a name="l01502"></a>01502     <span class="keywordflow">return</span> r;
<a name="l01503"></a>01503   }
<a name="l01504"></a>01504 
<a name="l01505"></a>01505 
<a name="l01506"></a>01506   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01507"></a><a class="code" href="namespacer3.html#a370ce381713dd5441e3c494361681697">01507</a>   <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a370ce381713dd5441e3c494361681697">ToMatrix4</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;T&gt;</a> &amp; m3 ) {
<a name="l01508"></a>01508     <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> m4;
<a name="l01509"></a>01509     m4( 0, 0 ) = m3( 0, 0 );   m4( 0, 1 ) = m3( 0, 1 );   m4( 0, 2 ) = m3( 0, 2 );   m4( 0, 3 ) = 0.0f;
<a name="l01510"></a>01510     m4( 1, 0 ) = m3( 1, 0 );   m4( 1, 1 ) = m3( 1, 1 );   m4( 1, 2 ) = m3( 1, 2 );   m4( 1, 3 ) = 0.0f;
<a name="l01511"></a>01511     m4( 2, 0 ) = m3( 2, 0 );   m4( 2, 1 ) = m3( 2, 1 );   m4( 2, 2 ) = m3( 2, 2 );   m4( 2, 3 ) = 0.0f;
<a name="l01512"></a>01512     m4( 3, 0 ) = 0.0f;         m4( 3, 1 ) = 0.0f;         m4( 3, 2 ) = 0.0f;         m4( 3, 3 ) = 1.0f;
<a name="l01513"></a>01513     <span class="keywordflow">return</span> m4;
<a name="l01514"></a>01514   }
<a name="l01515"></a>01515 
<a name="l01516"></a>01516 
<a name="l01517"></a>01517   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01518"></a><a class="code" href="namespacer3.html#ae0d790466a4e9f57a005c5fc5aa7af6d">01518</a>   <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;T&gt;</a> <a class="code" href="namespacer3.html#ae0d790466a4e9f57a005c5fc5aa7af6d">ToMatrix3</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m4 ) {
<a name="l01519"></a>01519     <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;T&gt;</a> m3;
<a name="l01520"></a>01520     m3( 0, 0 ) = m4( 0, 0 );   m3( 0, 1 ) = m4( 0, 1 );   m3( 0, 2 ) = m4( 0, 2 );
<a name="l01521"></a>01521     m3( 1, 0 ) = m4( 1, 0 );   m3( 1, 1 ) = m4( 1, 1 );   m3( 1, 2 ) = m4( 1, 2 );
<a name="l01522"></a>01522     m3( 2, 0 ) = m4( 2, 0 );   m3( 2, 1 ) = m4( 2, 1 );   m3( 2, 2 ) = m4( 2, 2 );
<a name="l01523"></a>01523     <span class="keywordflow">return</span> m3;
<a name="l01524"></a>01524   }
<a name="l01525"></a>01525 
<a name="l01526"></a>01526 
<a name="l01527"></a>01527 
<a name="l01528"></a>01528 
<a name="l01529"></a>01529 
<a name="l01530"></a>01530 
<a name="l01531"></a>01531 
<a name="l01532"></a>01532   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T&gt;
<a name="l01533"></a><a class="code" href="classr3_1_1Quaternion.html">01533</a>   <span class="keyword">class </span><a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> {
<a name="l01534"></a>01534   <span class="keyword">public</span>:
<a name="l01535"></a>01535 
<a name="l01536"></a><a class="code" href="classr3_1_1Quaternion.html#ab3fb5e0cdde364c5a0cbef0f37de8661">01536</a>     <a class="code" href="classr3_1_1Quaternion.html#ab3fb5e0cdde364c5a0cbef0f37de8661">Quaternion</a>() {
<a name="l01537"></a>01537       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0]=<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1]=<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2]=0.0;
<a name="l01538"></a>01538       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3]=<a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a>;
<a name="l01539"></a>01539     }
<a name="l01540"></a>01540 
<a name="l01541"></a><a class="code" href="classr3_1_1Quaternion.html#af6e6de667b459cb8e411f95e4e9ba878">01541</a>     <a class="code" href="classr3_1_1Quaternion.html#af6e6de667b459cb8e411f95e4e9ba878">Quaternion</a>( <span class="keyword">const</span> T v[4] ) {
<a name="l01542"></a>01542       <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>( v );
<a name="l01543"></a>01543     }
<a name="l01544"></a>01544 
<a name="l01545"></a>01545 
<a name="l01546"></a><a class="code" href="classr3_1_1Quaternion.html#a66df8638c1c1a253f4d7535f70f1de92">01546</a>     <a class="code" href="classr3_1_1Quaternion.html#a66df8638c1c1a253f4d7535f70f1de92">Quaternion</a>( T q0, T q1, T q2, T q3 ) {
<a name="l01547"></a>01547       <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>( q0, q1, q2, q3 );
<a name="l01548"></a>01548     }
<a name="l01549"></a>01549 
<a name="l01550"></a>01550 
<a name="l01551"></a><a class="code" href="classr3_1_1Quaternion.html#a7d1a305adabfa6dae0e6f23d88184164">01551</a>     <a class="code" href="classr3_1_1Quaternion.html#a7d1a305adabfa6dae0e6f23d88184164">Quaternion</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m )  {
<a name="l01552"></a>01552       <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>( m );
<a name="l01553"></a>01553     }
<a name="l01554"></a>01554 
<a name="l01555"></a>01555 
<a name="l01556"></a><a class="code" href="classr3_1_1Quaternion.html#a287eb1a6ccb7c3b133c1b77d8ccd5216">01556</a>     <a class="code" href="classr3_1_1Quaternion.html#a287eb1a6ccb7c3b133c1b77d8ccd5216">Quaternion</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;axis, T radians ) {
<a name="l01557"></a>01557       <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>( axis, radians );
<a name="l01558"></a>01558     }
<a name="l01559"></a>01559 
<a name="l01560"></a>01560 
<a name="l01561"></a><a class="code" href="classr3_1_1Quaternion.html#a3126ea09837d2af30d7af964af998df5">01561</a>     <a class="code" href="classr3_1_1Quaternion.html#a3126ea09837d2af30d7af964af998df5">Quaternion</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;rotateFrom, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;rotateTo ) {
<a name="l01562"></a>01562       <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>( rotateFrom, rotateTo );
<a name="l01563"></a>01563     }
<a name="l01564"></a>01564 
<a name="l01565"></a><a class="code" href="classr3_1_1Quaternion.html#a55df5b7a6afbbfff54d601b07dd195d3">01565</a>     <a class="code" href="classr3_1_1Quaternion.html#ab3fb5e0cdde364c5a0cbef0f37de8661">Quaternion</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; fromLook, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; fromUp,
<a name="l01566"></a>01566            <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; toLook, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>&amp; toUp) {
<a name="l01567"></a>01567       <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>(fromLook, fromUp, toLook, toUp);
<a name="l01568"></a>01568     }
<a name="l01569"></a>01569 
<a name="l01570"></a><a class="code" href="classr3_1_1Quaternion.html#afbe55513e93480471af1e6641ffdbb93">01570</a>     <span class="keyword">const</span> T * <a class="code" href="classr3_1_1Quaternion.html#afbe55513e93480471af1e6641ffdbb93">GetValue</a>()<span class="keyword"> const </span>{
<a name="l01571"></a>01571       <span class="keywordflow">return</span>  &amp;<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0];
<a name="l01572"></a>01572     }
<a name="l01573"></a>01573 
<a name="l01574"></a><a class="code" href="classr3_1_1Quaternion.html#a2195b0d79fb87dc7a28651305d91ab44">01574</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#a2195b0d79fb87dc7a28651305d91ab44">GetValue</a>( T &amp;q0, T &amp;q1, T &amp;q2, T &amp;q3 )<span class="keyword"> const </span>{
<a name="l01575"></a>01575       q0 = <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0];
<a name="l01576"></a>01576       q1 = <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1];
<a name="l01577"></a>01577       q2 = <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2];
<a name="l01578"></a>01578       q3 = <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3];
<a name="l01579"></a>01579     }
<a name="l01580"></a>01580 
<a name="l01581"></a><a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">01581</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>( T q0, T q1, T q2, T q3 ) {
<a name="l01582"></a>01582       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0] = q0;
<a name="l01583"></a>01583       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1] = q1;
<a name="l01584"></a>01584       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2] = q2;
<a name="l01585"></a>01585       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3] = q3;
<a name="l01586"></a>01586       <a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a> = 0;
<a name="l01587"></a>01587       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01588"></a>01588     }
<a name="l01589"></a>01589 
<a name="l01590"></a><a class="code" href="classr3_1_1Quaternion.html#a4cbf21711e372c1c66143088709928f2">01590</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#a4cbf21711e372c1c66143088709928f2">GetValue</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;axis, T &amp;radians )<span class="keyword"> const </span>{
<a name="l01591"></a>01591       radians = T(acos( <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3] ) * <a class="code" href="linear_8h.html#a336d02ed2a436f5a770a710526325fe8">R3_TWO</a>);
<a name="l01592"></a>01592       <span class="keywordflow">if</span> ( radians == <a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a> )
<a name="l01593"></a>01593         axis = <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( 0.0, 0.0, 1.0 );
<a name="l01594"></a>01594       <span class="keywordflow">else</span>
<a name="l01595"></a>01595       {
<a name="l01596"></a>01596         axis.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> = <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0];
<a name="l01597"></a>01597         axis.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> = <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1];
<a name="l01598"></a>01598         axis.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> = <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2];
<a name="l01599"></a>01599         axis.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l01600"></a>01600       }
<a name="l01601"></a>01601     }
<a name="l01602"></a>01602 
<a name="l01603"></a><a class="code" href="classr3_1_1Quaternion.html#ad68b3e835da193bab10b1defa1c2ec6b">01603</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#ad68b3e835da193bab10b1defa1c2ec6b">GetValue</a>( <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;T&gt;</a> &amp; m )<span class="keyword"> const </span>{
<a name="l01604"></a>01604       T s, xs, ys, zs, wx, wy, wz, xx, xy, xz, yy, yz, zz;
<a name="l01605"></a>01605 
<a name="l01606"></a>01606       T norm = <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0] * <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0] + <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1] * <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1] + <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2] * <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2] + <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3] * <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3];
<a name="l01607"></a>01607 
<a name="l01608"></a>01608       s = (<a class="code" href="linear_8h.html#a03484aee0fbf6e454300136c2ca9f7e1">r3_equivalent</a>(norm,<a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a>)) ? <a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a> : ( <a class="code" href="linear_8h.html#a336d02ed2a436f5a770a710526325fe8">R3_TWO</a> / norm );
<a name="l01609"></a>01609 
<a name="l01610"></a>01610       xs = q[0] * s;
<a name="l01611"></a>01611       ys = q[1] * s;
<a name="l01612"></a>01612       zs = q[2] * s;
<a name="l01613"></a>01613 
<a name="l01614"></a>01614       wx = q[3] * xs;
<a name="l01615"></a>01615       wy = q[3] * ys;
<a name="l01616"></a>01616       wz = q[3] * zs;
<a name="l01617"></a>01617 
<a name="l01618"></a>01618       xx = q[0] * xs;
<a name="l01619"></a>01619       xy = q[0] * ys;
<a name="l01620"></a>01620       xz = q[0] * zs;
<a name="l01621"></a>01621 
<a name="l01622"></a>01622       yy = q[1] * ys;
<a name="l01623"></a>01623       yz = q[1] * zs;
<a name="l01624"></a>01624       zz = q[2] * zs;
<a name="l01625"></a>01625 
<a name="l01626"></a>01626       m(0,0) = T( <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> - ( yy + zz ));
<a name="l01627"></a>01627       m(1,0) = T ( xy + wz );
<a name="l01628"></a>01628       m(2,0) = T ( xz - wy );
<a name="l01629"></a>01629 
<a name="l01630"></a>01630       m(0,1) = T ( xy - wz );
<a name="l01631"></a>01631       m(1,1) = T ( <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> - ( xx + zz ));
<a name="l01632"></a>01632       m(2,1) = T ( yz + wx );
<a name="l01633"></a>01633 
<a name="l01634"></a>01634       m(0,2) = T ( xz + wy );
<a name="l01635"></a>01635       m(1,2) = T ( yz - wx );
<a name="l01636"></a>01636       m(2,2) = T ( <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> - ( xx + yy ));
<a name="l01637"></a>01637     }
<a name="l01638"></a>01638 
<a name="l01639"></a><a class="code" href="classr3_1_1Quaternion.html#ae6db37ca0c1761b5795bba201a012846">01639</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#ae6db37ca0c1761b5795bba201a012846">GetValue</a>( <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m )<span class="keyword"> const </span>{
<a name="l01640"></a>01640       <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;T&gt;</a> m3;
<a name="l01641"></a>01641       <a class="code" href="classr3_1_1Quaternion.html#afbe55513e93480471af1e6641ffdbb93">GetValue</a>( m3 );
<a name="l01642"></a>01642       m = <a class="code" href="namespacer3.html#a370ce381713dd5441e3c494361681697">ToMatrix4</a>( m3 );
<a name="l01643"></a>01643     }
<a name="l01644"></a>01644 
<a name="l01645"></a><a class="code" href="classr3_1_1Quaternion.html#a0de5a3f8031a79315652b6c4e3973b37">01645</a>     <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;T&gt;</a> <a class="code" href="classr3_1_1Quaternion.html#a0de5a3f8031a79315652b6c4e3973b37">GetMatrix3</a>()<span class="keyword"> const </span>{
<a name="l01646"></a>01646       <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;T&gt;</a> m;
<a name="l01647"></a>01647       <a class="code" href="classr3_1_1Quaternion.html#afbe55513e93480471af1e6641ffdbb93">GetValue</a>( m );
<a name="l01648"></a>01648       <span class="keywordflow">return</span> m;
<a name="l01649"></a>01649     }
<a name="l01650"></a>01650 
<a name="l01651"></a><a class="code" href="classr3_1_1Quaternion.html#a07ace183aca4bd315a79891245fb725a">01651</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="classr3_1_1Quaternion.html#a07ace183aca4bd315a79891245fb725a">GetMatrix4</a>()<span class="keyword"> const </span>{
<a name="l01652"></a>01652       <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> m;
<a name="l01653"></a>01653       <a class="code" href="classr3_1_1Quaternion.html#afbe55513e93480471af1e6641ffdbb93">GetValue</a>( m );
<a name="l01654"></a>01654       <span class="keywordflow">return</span> m;
<a name="l01655"></a>01655     }
<a name="l01656"></a>01656 
<a name="l01657"></a><a class="code" href="classr3_1_1Quaternion.html#a7e7298c9e706cbadfb54d6bdc012279f">01657</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#a7e7298c9e706cbadfb54d6bdc012279f">SetValue</a>( <span class="keyword">const</span> T * qp ) {
<a name="l01658"></a>01658       memcpy(<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>,qp,<span class="keyword">sizeof</span>(T) * 4);
<a name="l01659"></a>01659 
<a name="l01660"></a>01660       <a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a> = 0;
<a name="l01661"></a>01661       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01662"></a>01662     }
<a name="l01663"></a>01663 
<a name="l01664"></a><a class="code" href="classr3_1_1Quaternion.html#aab3cb03f4454a85cae4e4bd234168bd4">01664</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#aab3cb03f4454a85cae4e4bd234168bd4">SetValue</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp; m ) {
<a name="l01665"></a>01665       T tr, s;
<a name="l01666"></a>01666       <span class="keywordtype">int</span> i, j, k;
<a name="l01667"></a>01667       <span class="keyword">const</span> <span class="keywordtype">int</span> nxt[3] = { 1, 2, 0 };
<a name="l01668"></a>01668 
<a name="l01669"></a>01669       tr = m(0,0) + m(1,1) + m(2,2);
<a name="l01670"></a>01670 
<a name="l01671"></a>01671       <span class="keywordflow">if</span> ( tr &gt; <a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a> )
<a name="l01672"></a>01672       {
<a name="l01673"></a>01673         s = T(sqrt( tr + m(3,3) ));
<a name="l01674"></a>01674         <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3] = T ( s * 0.5 );
<a name="l01675"></a>01675         s = T(0.5) / s;
<a name="l01676"></a>01676 
<a name="l01677"></a>01677         <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0] = T ( ( m(1,2) - m(2,1) ) * s );
<a name="l01678"></a>01678         <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1] = T ( ( m(2,0) - m(0,2) ) * s );
<a name="l01679"></a>01679         <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2] = T ( ( m(0,1) - m(1,0) ) * s );
<a name="l01680"></a>01680       }
<a name="l01681"></a>01681       <span class="keywordflow">else</span>
<a name="l01682"></a>01682       {
<a name="l01683"></a>01683         i = 0;
<a name="l01684"></a>01684         <span class="keywordflow">if</span> ( m(1,1) &gt; m(0,0) )
<a name="l01685"></a>01685           i = 1;
<a name="l01686"></a>01686 
<a name="l01687"></a>01687         <span class="keywordflow">if</span> ( m(2,2) &gt; m(i,i) )
<a name="l01688"></a>01688           i = 2;
<a name="l01689"></a>01689 
<a name="l01690"></a>01690         j = nxt[i];
<a name="l01691"></a>01691         k = nxt[j];
<a name="l01692"></a>01692 
<a name="l01693"></a>01693         s = T(sqrt( ( m(i,j) - ( m(j,j) + m(k,k) )) + <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> ));
<a name="l01694"></a>01694 
<a name="l01695"></a>01695         <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[i] = T ( s * 0.5 );
<a name="l01696"></a>01696         s = T(0.5 / s);
<a name="l01697"></a>01697 
<a name="l01698"></a>01698         <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3] = T ( ( m(j,k) - m(k,j) ) * s );
<a name="l01699"></a>01699         <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[j] = T ( ( m(i,j) + m(j,i) ) * s );
<a name="l01700"></a>01700         <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[k] = T ( ( m(i,k) + m(k,i) ) * s );
<a name="l01701"></a>01701       }
<a name="l01702"></a>01702 
<a name="l01703"></a>01703       <a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a> = 0;
<a name="l01704"></a>01704       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01705"></a>01705     }
<a name="l01706"></a>01706 
<a name="l01707"></a><a class="code" href="classr3_1_1Quaternion.html#af97ce7ec5decc906ea5b8ed4a787cd89">01707</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#af97ce7ec5decc906ea5b8ed4a787cd89">SetValue</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;axis, T theta ) {
<a name="l01708"></a>01708       T sqnorm = axis.<a class="code" href="classr3_1_1Vec3.html#a47be0a700e347c48959f5428b81b64ca">SquareNorm</a>();
<a name="l01709"></a>01709 
<a name="l01710"></a>01710       <span class="keywordflow">if</span> (sqnorm &lt;= <a class="code" href="linear_8h.html#adbf50c4e72350fb6740ed5c3f3ca0b14">R3_EPSILON</a>)
<a name="l01711"></a>01711       {
<a name="l01712"></a>01712         <span class="comment">// axis too small.</span>
<a name="l01713"></a>01713         <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> = <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> = <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> = 0.0;
<a name="l01714"></a>01714         <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> = <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a>;
<a name="l01715"></a>01715       }
<a name="l01716"></a>01716       <span class="keywordflow">else</span>
<a name="l01717"></a>01717       {
<a name="l01718"></a>01718         theta *= T(0.5);
<a name="l01719"></a>01719         T sin_theta = T(sin(theta));
<a name="l01720"></a>01720 
<a name="l01721"></a>01721         <span class="keywordflow">if</span> (!<a class="code" href="linear_8h.html#a03484aee0fbf6e454300136c2ca9f7e1">r3_equivalent</a>(sqnorm,<a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a>))
<a name="l01722"></a>01722           sin_theta /= T(sqrt(sqnorm));
<a name="l01723"></a>01723         <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> = sin_theta * axis.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>;
<a name="l01724"></a>01724         <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> = sin_theta * axis.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>;
<a name="l01725"></a>01725         <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> = sin_theta * axis.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>;
<a name="l01726"></a>01726         <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> = T(cos(theta));
<a name="l01727"></a>01727       }
<a name="l01728"></a>01728       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01729"></a>01729     }
<a name="l01730"></a>01730 
<a name="l01731"></a><a class="code" href="classr3_1_1Quaternion.html#ac29c885cf4f12dcdc2d981f4c977bac0">01731</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#ac29c885cf4f12dcdc2d981f4c977bac0">SetValue</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; rotateFrom, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; rotateTo ) {
<a name="l01732"></a>01732       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> p1, p2;
<a name="l01733"></a>01733       T alpha;
<a name="l01734"></a>01734 
<a name="l01735"></a>01735       p1 = rotateFrom;
<a name="l01736"></a>01736       p1.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l01737"></a>01737       p2 = rotateTo;
<a name="l01738"></a>01738       p2.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l01739"></a>01739 
<a name="l01740"></a>01740       alpha = p1.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(p2);
<a name="l01741"></a>01741 
<a name="l01742"></a>01742       <span class="keywordflow">if</span>(<a class="code" href="linear_8h.html#ac9bcd55b4d7251589cd80565218d265f">r3_greater_than</a>(alpha,<a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a>))
<a name="l01743"></a>01743       {
<a name="l01744"></a>01744         *<span class="keyword">this</span> = <a class="code" href="classr3_1_1Quaternion.html#a57a64cc10d440bb111460abb08654ba4">Identity</a>();
<a name="l01745"></a>01745         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01746"></a>01746       }
<a name="l01747"></a>01747 
<a name="l01748"></a>01748       <span class="comment">// ensures that the anti-parallel case leads to a positive dot</span>
<a name="l01749"></a>01749       <span class="keywordflow">if</span>(<a class="code" href="linear_8h.html#a9edca31c92496aa90a3814f08860b671">r3_less_than</a>(alpha,-<a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a>))
<a name="l01750"></a>01750       {
<a name="l01751"></a>01751         <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> v ;
<a name="l01752"></a>01752 
<a name="l01753"></a>01753         <span class="keywordflow">if</span>( p1.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> != p1.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> )
<a name="l01754"></a>01754           v = <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(p1.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>, p1.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>, p1.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>);
<a name="l01755"></a>01755         <span class="keywordflow">else</span>
<a name="l01756"></a>01756           v = <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(p1.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>, p1.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>, p1.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>);
<a name="l01757"></a>01757 
<a name="l01758"></a>01758         v -= p1 * p1.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(v);
<a name="l01759"></a>01759         v.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l01760"></a>01760 
<a name="l01761"></a>01761         <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>(v, <a class="code" href="linear_8h.html#abb0f3cdb262a767a506f28661e4d2f1d">R3_PI</a>);
<a name="l01762"></a>01762         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01763"></a>01763       }
<a name="l01764"></a>01764 
<a name="l01765"></a>01765       p1 = p1.<a class="code" href="classr3_1_1Vec3.html#a9c8858b38ef5130c26c9d51abbc2b037">Cross</a>(p2);
<a name="l01766"></a>01766       p1.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l01767"></a>01767       <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>(p1,T(acos(alpha)));
<a name="l01768"></a>01768 
<a name="l01769"></a>01769       <a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a> = 0;
<a name="l01770"></a>01770       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01771"></a>01771     }
<a name="l01772"></a>01772 
<a name="l01773"></a><a class="code" href="classr3_1_1Quaternion.html#a781b1519fedd2405554ae829884fdb41">01773</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; fromLook, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; fromUp,
<a name="l01774"></a>01774                  <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; toLook, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; toUp) {
<a name="l01775"></a>01775       <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> rLook = <a class="code" href="classr3_1_1Quaternion.html#ab3fb5e0cdde364c5a0cbef0f37de8661">Quaternion</a>(fromLook, toLook);
<a name="l01776"></a>01776 
<a name="l01777"></a>01777       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> rotatedFromUp(fromUp);
<a name="l01778"></a>01778       rLook.<a class="code" href="classr3_1_1Quaternion.html#ae8a46ec96afc54aa8f9a664452306aa8">MultVec</a>(rotatedFromUp);
<a name="l01779"></a>01779 
<a name="l01780"></a>01780       <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> rTwist = <a class="code" href="classr3_1_1Quaternion.html#ab3fb5e0cdde364c5a0cbef0f37de8661">Quaternion</a>(rotatedFromUp, toUp);
<a name="l01781"></a>01781 
<a name="l01782"></a>01782       *<span class="keyword">this</span> = rTwist;
<a name="l01783"></a>01783       *<span class="keyword">this</span> *= rLook;
<a name="l01784"></a>01784       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01785"></a>01785     }
<a name="l01786"></a>01786 
<a name="l01787"></a><a class="code" href="classr3_1_1Quaternion.html#ac3da6db7c453a3d35105bf9f4eace3ab">01787</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#ac3da6db7c453a3d35105bf9f4eace3ab">operator *= </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; qr ) {
<a name="l01788"></a>01788       <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> ql(*<span class="keyword">this</span>);
<a name="l01789"></a>01789 
<a name="l01790"></a>01790       <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> = ql.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> - ql.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> - ql.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> - ql.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a>;
<a name="l01791"></a>01791       <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> = ql.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> + ql.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> + ql.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> - ql.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a>;
<a name="l01792"></a>01792       <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> = ql.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> + ql.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> + ql.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> - ql.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a>;
<a name="l01793"></a>01793       <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> = ql.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> + ql.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> + ql.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> - ql.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * qr.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a>;
<a name="l01794"></a>01794 
<a name="l01795"></a>01795       <a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a> += qr.<a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a>;
<a name="l01796"></a>01796       <a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a>++;
<a name="l01797"></a>01797       <a class="code" href="classr3_1_1Quaternion.html#aa0e8ddb3c17d40d85d15540e34d17979">CounterNormalize</a>();
<a name="l01798"></a>01798       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01799"></a>01799     }
<a name="l01800"></a>01800 
<a name="l01801"></a><a class="code" href="classr3_1_1Quaternion.html#a698f489ec582584161348a36a9a1445c">01801</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#a698f489ec582584161348a36a9a1445c">Normalize</a>() {
<a name="l01802"></a>01802       T rnorm = <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> / T(sqrt(<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> * <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> + <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> + <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> + <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> * <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a>));
<a name="l01803"></a>01803       <span class="keywordflow">if</span> (<a class="code" href="linear_8h.html#a03484aee0fbf6e454300136c2ca9f7e1">r3_equivalent</a>(rnorm, <a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a>))
<a name="l01804"></a>01804         <span class="keywordflow">return</span>;
<a name="l01805"></a>01805       <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> *= rnorm;
<a name="l01806"></a>01806       <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> *= rnorm;
<a name="l01807"></a>01807       z *= rnorm;
<a name="l01808"></a>01808       <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> *= rnorm;
<a name="l01809"></a>01809       <a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a> = 0;
<a name="l01810"></a>01810     }
<a name="l01811"></a>01811 
<a name="l01812"></a>01812 
<a name="l01813"></a><a class="code" href="classr3_1_1Quaternion.html#a93d0ea7db4a9b42e7f5667d02060e4ef">01813</a>     <span class="keywordtype">bool</span> <a class="code" href="classr3_1_1Quaternion.html#a93d0ea7db4a9b42e7f5667d02060e4ef">Equals</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; r, T tolerance )<span class="keyword"> const </span>{
<a name="l01814"></a>01814       T t;
<a name="l01815"></a>01815 
<a name="l01816"></a>01816       t = (
<a name="l01817"></a>01817          (<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0]-r.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0])*(<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0]-r.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0]) +
<a name="l01818"></a>01818          (<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1]-r.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1])*(<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1]-r.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1]) +
<a name="l01819"></a>01819          (<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2]-r.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2])*(<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2]-r.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2]) +
<a name="l01820"></a>01820          (<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3]-r.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3])*(<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3]-r.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3]) );
<a name="l01821"></a>01821       <span class="keywordflow">if</span>(t &gt; <a class="code" href="linear_8h.html#adbf50c4e72350fb6740ed5c3f3ca0b14">R3_EPSILON</a>)
<a name="l01822"></a>01822         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01823"></a>01823       <span class="keywordflow">return</span> 1;
<a name="l01824"></a>01824     }
<a name="l01825"></a>01825 
<a name="l01826"></a><a class="code" href="classr3_1_1Quaternion.html#aa1c9aee4da769c5b578a6757f0e01be8">01826</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#aa1c9aee4da769c5b578a6757f0e01be8">Conjugate</a>() {
<a name="l01827"></a>01827       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0] *= -<a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a>;
<a name="l01828"></a>01828       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1] *= -<a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a>;
<a name="l01829"></a>01829       <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2] *= -<a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a>;
<a name="l01830"></a>01830       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01831"></a>01831     }
<a name="l01832"></a>01832 
<a name="l01833"></a><a class="code" href="classr3_1_1Quaternion.html#a3cfd462f2007c86aa26ff61a5624e1d2">01833</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#a3cfd462f2007c86aa26ff61a5624e1d2">Invert</a>() {
<a name="l01834"></a>01834       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Quaternion.html#aa1c9aee4da769c5b578a6757f0e01be8">Conjugate</a>();
<a name="l01835"></a>01835     }
<a name="l01836"></a>01836 
<a name="l01837"></a><a class="code" href="classr3_1_1Quaternion.html#a83ea34e19a1dc7b65265d85cf14593fa">01837</a>     <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> <a class="code" href="classr3_1_1Quaternion.html#a83ea34e19a1dc7b65265d85cf14593fa">Inverse</a>()<span class="keyword"> const </span>{
<a name="l01838"></a>01838       <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> r = *<span class="keyword">this</span>;
<a name="l01839"></a>01839       <span class="keywordflow">return</span> r.<a class="code" href="classr3_1_1Quaternion.html#a3cfd462f2007c86aa26ff61a5624e1d2">Invert</a>();
<a name="l01840"></a>01840     }
<a name="l01841"></a>01841 
<a name="l01842"></a>01842     <span class="comment">//</span>
<a name="l01843"></a>01843     <span class="comment">// Quaternion multiplication with cartesian vector</span>
<a name="l01844"></a>01844     <span class="comment">// v&#39; = q*v*q(star)</span>
<a name="l01845"></a>01845     <span class="comment">//</span>
<a name="l01846"></a><a class="code" href="classr3_1_1Quaternion.html#ae8a46ec96afc54aa8f9a664452306aa8">01846</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#ae8a46ec96afc54aa8f9a664452306aa8">MultVec</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;src, <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;dst )<span class="keyword"> const </span>{
<a name="l01847"></a>01847       T v_coef = <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> * <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> - <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> - <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> - <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> * <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a>;
<a name="l01848"></a>01848       T u_coef = <a class="code" href="linear_8h.html#a336d02ed2a436f5a770a710526325fe8">R3_TWO</a> * (src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> * <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> + src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> * <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> + src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> * <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a>);
<a name="l01849"></a>01849       T c_coef = <a class="code" href="linear_8h.html#a336d02ed2a436f5a770a710526325fe8">R3_TWO</a> * <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a>;
<a name="l01850"></a>01850 
<a name="l01851"></a>01851       dst.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> = v_coef * src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> + u_coef * <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> + c_coef * (<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> - z * src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a>);
<a name="l01852"></a>01852       dst.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> = v_coef * src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> + u_coef * <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> + c_coef * (z * src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a> - <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a>);
<a name="l01853"></a>01853       dst.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> = v_coef * src.<a class="code" href="classr3_1_1Vec3.html#adca17473b0733b7980a2365f941a96e9">z</a> + u_coef * z + c_coef * (<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * src.<a class="code" href="classr3_1_1Vec3.html#a4679b9db727feab2e3d06234d21571b9">y</a> - <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * src.<a class="code" href="classr3_1_1Vec3.html#a5e78c8f147f6166cd867271f4239ea59">x</a>);
<a name="l01854"></a>01854     }
<a name="l01855"></a>01855 
<a name="l01856"></a><a class="code" href="classr3_1_1Quaternion.html#a4893782b3a3a90aa96c27676cdc509e1">01856</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#a4893782b3a3a90aa96c27676cdc509e1">MultVec</a>( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; src_and_dst)<span class="keyword"> const </span>{
<a name="l01857"></a>01857       <a class="code" href="classr3_1_1Quaternion.html#ae8a46ec96afc54aa8f9a664452306aa8">MultVec</a>(<a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(src_and_dst), src_and_dst);
<a name="l01858"></a>01858     }
<a name="l01859"></a>01859 
<a name="l01860"></a><a class="code" href="classr3_1_1Quaternion.html#af0953955787115c9fe879af5bd3cbf93">01860</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#af0953955787115c9fe879af5bd3cbf93">ScaleAngle</a>( T scaleFactor ) {
<a name="l01861"></a>01861       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> axis;
<a name="l01862"></a>01862       T radians;
<a name="l01863"></a>01863 
<a name="l01864"></a>01864       <a class="code" href="classr3_1_1Quaternion.html#afbe55513e93480471af1e6641ffdbb93">GetValue</a>(axis, radians);
<a name="l01865"></a>01865       radians *= scaleFactor;
<a name="l01866"></a>01866       <a class="code" href="classr3_1_1Quaternion.html#a075b6ca87cfad52714817b8c92565729">SetValue</a>(axis, radians);
<a name="l01867"></a>01867     }
<a name="l01868"></a>01868 
<a name="l01869"></a><a class="code" href="classr3_1_1Quaternion.html#a5cf803ea4f1c8fc6dcdfc5992cfde85c">01869</a>     <span class="keyword">static</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> <a class="code" href="classr3_1_1Quaternion.html#a5cf803ea4f1c8fc6dcdfc5992cfde85c">Slerp</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; p, <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> &amp; <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>, T alpha ) {
<a name="l01870"></a>01870       <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> r;
<a name="l01871"></a>01871 
<a name="l01872"></a>01872       T cos_omega = p.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> * q.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> + p.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> * q.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> + p.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> * q.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> + p.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> * q.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a>;
<a name="l01873"></a>01873       <span class="comment">// if B is on opposite hemisphere from A, use -B instead</span>
<a name="l01874"></a>01874 
<a name="l01875"></a>01875       <span class="keywordtype">int</span> bflip;
<a name="l01876"></a>01876       <span class="keywordflow">if</span> ( ( bflip = (cos_omega &lt; <a class="code" href="linear_8h.html#adfe283603805f14de1e642b845ebf4d6">R3_ZERO</a>)) )
<a name="l01877"></a>01877         cos_omega = -cos_omega;
<a name="l01878"></a>01878 
<a name="l01879"></a>01879       <span class="comment">// complementary interpolation parameter</span>
<a name="l01880"></a>01880       T beta = <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> - alpha;
<a name="l01881"></a>01881 
<a name="l01882"></a>01882       <span class="keywordflow">if</span>(cos_omega &lt;= <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> - <a class="code" href="linear_8h.html#adbf50c4e72350fb6740ed5c3f3ca0b14">R3_EPSILON</a>)
<a name="l01883"></a>01883         <span class="keywordflow">return</span> p;
<a name="l01884"></a>01884 
<a name="l01885"></a>01885       T omega = T(acos(cos_omega));
<a name="l01886"></a>01886       T one_over_sin_omega = <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> / T(sin(omega));
<a name="l01887"></a>01887 
<a name="l01888"></a>01888       beta    = T(sin(omega*beta)  * one_over_sin_omega);
<a name="l01889"></a>01889       alpha   = T(sin(omega*alpha) * one_over_sin_omega);
<a name="l01890"></a>01890 
<a name="l01891"></a>01891       <span class="keywordflow">if</span> (bflip)
<a name="l01892"></a>01892         alpha = -alpha;
<a name="l01893"></a>01893 
<a name="l01894"></a>01894       r.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a> = beta * p.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0]+ alpha * q.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[0];
<a name="l01895"></a>01895       r.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a> = beta * p.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1]+ alpha * q.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[1];
<a name="l01896"></a>01896       r.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a> = beta * p.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2]+ alpha * q.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[2];
<a name="l01897"></a>01897       r.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a> = beta * p.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3]+ alpha * q.<a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[3];
<a name="l01898"></a>01898       <span class="keywordflow">return</span> r;
<a name="l01899"></a>01899     }
<a name="l01900"></a>01900 
<a name="l01901"></a><a class="code" href="classr3_1_1Quaternion.html#a57a64cc10d440bb111460abb08654ba4">01901</a>     <span class="keyword">static</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> <a class="code" href="classr3_1_1Quaternion.html#a57a64cc10d440bb111460abb08654ba4">Identity</a>() {
<a name="l01902"></a>01902       <span class="keyword">static</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion</a> ident( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( 0.0, 0.0, 0.0 ), <a class="code" href="linear_8h.html#a6d41b3e33f3a2a80449cecbb0a760aab">R3_ONE</a> );
<a name="l01903"></a>01903       <span class="keywordflow">return</span> ident;
<a name="l01904"></a>01904     }
<a name="l01905"></a>01905 
<a name="l01906"></a><a class="code" href="classr3_1_1Quaternion.html#a76a2bb5ae8e538909dccba442507bd62">01906</a>     T &amp; <a class="code" href="classr3_1_1Quaternion.html#a76a2bb5ae8e538909dccba442507bd62">operator []</a>( <span class="keywordtype">int</span> i ) {
<a name="l01907"></a>01907       assert(i &lt; 4);
<a name="l01908"></a>01908       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[i];
<a name="l01909"></a>01909     }
<a name="l01910"></a>01910 
<a name="l01911"></a><a class="code" href="classr3_1_1Quaternion.html#afc9bf637f2b02c56b6a57f26ca3b91fc">01911</a>     <span class="keyword">const</span> T &amp; <a class="code" href="classr3_1_1Quaternion.html#a76a2bb5ae8e538909dccba442507bd62">operator []</a>( <span class="keywordtype">int</span> i )<span class="keyword"> const </span>{
<a name="l01912"></a>01912       assert(i &lt; 4);
<a name="l01913"></a>01913       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[i];
<a name="l01914"></a>01914     }
<a name="l01915"></a>01915 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l01916"></a>01916 <span class="preprocessor"></span><span class="preprocessor">#pragma warning (push)</span>
<a name="l01917"></a>01917 <span class="preprocessor"></span><span class="preprocessor">#pragma warning (disable: 4201) //warning C4201: nonstandard extension used : nameless struct/union</span>
<a name="l01918"></a>01918 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l01919"></a>01919 <span class="preprocessor"></span>    <span class="keyword">union </span>{
<a name="l01920"></a><a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">01920</a>       <span class="keyword">struct </span>{ T <a class="code" href="classr3_1_1Quaternion.html#ab57909ba65e676473ac07cc63132a0f5">q</a>[4]; };
<a name="l01921"></a><a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">01921</a>       <span class="keyword">struct </span>{ T <a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a>, <a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a>, <a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a>, <a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a>; };
<a name="l01922"></a>01922     };
<a name="l01923"></a>01923 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l01924"></a>01924 <span class="preprocessor"></span><span class="preprocessor">#pragma warning (pop)</span>
<a name="l01925"></a>01925 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l01926"></a>01926 <span class="preprocessor"></span>
<a name="l01927"></a>01927   <span class="keyword">protected</span>:
<a name="l01928"></a>01928 
<a name="l01929"></a><a class="code" href="classr3_1_1Quaternion.html#aa0e8ddb3c17d40d85d15540e34d17979">01929</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Quaternion.html#aa0e8ddb3c17d40d85d15540e34d17979">CounterNormalize</a>() {
<a name="l01930"></a>01930       <span class="keywordflow">if</span> (<a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a> &gt; <a class="code" href="linear_8h.html#aae607a3a55980d8d352d11e1efcb942e">R3_QUATERNION_NORMALIZATION_THRESHOLD</a>)
<a name="l01931"></a>01931         <a class="code" href="classr3_1_1Quaternion.html#a698f489ec582584161348a36a9a1445c">Normalize</a>();
<a name="l01932"></a>01932     }
<a name="l01933"></a>01933 
<a name="l01934"></a>01934     <span class="comment">// renormalization counter</span>
<a name="l01935"></a><a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">01935</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classr3_1_1Quaternion.html#a3ce434f7b2b2629042883c0aa44da11a">counter</a>;
<a name="l01936"></a>01936   };
<a name="l01937"></a>01937 
<a name="l01938"></a>01938   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01939"></a><a class="code" href="namespacer3.html#a97b16533e4eea37c158bb5a80302c53f">01939</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#a8615485ea001c58af7cb1d6b1ee612c8">operator == </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> &amp; q1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> &amp; q2 ) {
<a name="l01940"></a>01940     <span class="keywordflow">return</span> (<a class="code" href="linear_8h.html#a03484aee0fbf6e454300136c2ca9f7e1">r3_equivalent</a>(q1.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a>, q2.<a class="code" href="classr3_1_1Quaternion.html#ae6c27e46150db77d775016d400f6987d">x</a>) &amp;&amp;
<a name="l01941"></a>01941         <a class="code" href="linear_8h.html#a03484aee0fbf6e454300136c2ca9f7e1">r3_equivalent</a>(q1.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a>, q2.<a class="code" href="classr3_1_1Quaternion.html#a424d7b638fd669b759b98f4224802fd0">y</a>) &amp;&amp;
<a name="l01942"></a>01942         <a class="code" href="linear_8h.html#a03484aee0fbf6e454300136c2ca9f7e1">r3_equivalent</a>(q1.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a>, q2.<a class="code" href="classr3_1_1Quaternion.html#a26357e63a516766412e63180ba63745f">z</a>) &amp;&amp;
<a name="l01943"></a>01943         <a class="code" href="linear_8h.html#a03484aee0fbf6e454300136c2ca9f7e1">r3_equivalent</a>(q1.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a>, q2.<a class="code" href="classr3_1_1Quaternion.html#a6b5958ad068f94f8e705a3baaad4251b">w</a>) );
<a name="l01944"></a>01944   }
<a name="l01945"></a>01945 
<a name="l01946"></a>01946   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01947"></a><a class="code" href="namespacer3.html#acbeaaaba8a25ff6ce306aba79724a8eb">01947</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#ad7488bc006398d5a428b892f93be6f78">operator != </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> &amp; q1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> &amp; q2 ) {
<a name="l01948"></a>01948     <span class="keywordflow">return</span> ! ( q1 == q2 );
<a name="l01949"></a>01949   }
<a name="l01950"></a>01950 
<a name="l01951"></a>01951   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l01952"></a><a class="code" href="namespacer3.html#a60fcde0831629ccf41603864e840a65f">01952</a>   <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> <a class="code" href="namespacer3.html#a65f6682b1f84172cacff5678d77a89d8">operator * </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> &amp; q1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> &amp; q2 ) {
<a name="l01953"></a>01953     <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> r(q1);
<a name="l01954"></a>01954     r *= q2;
<a name="l01955"></a>01955     <span class="keywordflow">return</span> r;
<a name="l01956"></a>01956   }
<a name="l01957"></a>01957 
<a name="l01958"></a>01958 
<a name="l01959"></a>01959 
<a name="l01960"></a>01960 
<a name="l01961"></a>01961 
<a name="l01962"></a>01962 
<a name="l01963"></a>01963 
<a name="l01964"></a>01964 
<a name="l01965"></a>01965 
<a name="l01966"></a>01966   <span class="keyword">template</span> &lt; <span class="keyword">typename</span> T&gt;
<a name="l01967"></a><a class="code" href="classr3_1_1Plane.html">01967</a>   <span class="keyword">class </span><a class="code" href="classr3_1_1Plane.html">Plane</a> {
<a name="l01968"></a>01968   <span class="keyword">public</span>:
<a name="l01969"></a>01969 
<a name="l01970"></a><a class="code" href="classr3_1_1Plane.html#ab0e7898680de4dac36686f29f37c2bc9">01970</a>     <a class="code" href="classr3_1_1Plane.html#ab0e7898680de4dac36686f29f37c2bc9">Plane</a>() {
<a name="l01971"></a>01971       <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a> = 0.0;
<a name="l01972"></a>01972       <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>.SetValue( 0.0, 0.0, 1.0 );
<a name="l01973"></a>01973     }
<a name="l01974"></a>01974 
<a name="l01975"></a>01975 
<a name="l01976"></a><a class="code" href="classr3_1_1Plane.html#a67dfc0ec132a1ac5b53a7f10b14076c8">01976</a>     <a class="code" href="classr3_1_1Plane.html#a67dfc0ec132a1ac5b53a7f10b14076c8">Plane</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;p0, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;p1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;p2 ) {
<a name="l01977"></a>01977       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> v0 = p1 - p0;
<a name="l01978"></a>01978       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> v1 = p2 - p0;
<a name="l01979"></a>01979       <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a> = v0.<a class="code" href="classr3_1_1Vec3.html#a9c8858b38ef5130c26c9d51abbc2b037">Cross</a>(v1);
<a name="l01980"></a>01980       <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>.Normalize();
<a name="l01981"></a>01981       <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a> = p0.Dot(<a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>);
<a name="l01982"></a>01982     }
<a name="l01983"></a>01983 
<a name="l01984"></a><a class="code" href="classr3_1_1Plane.html#ac12e1ae4be7f7f9efe607e836cac8e63">01984</a>     <a class="code" href="classr3_1_1Plane.html#ac12e1ae4be7f7f9efe607e836cac8e63">Plane</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;normal, T distance ) {
<a name="l01985"></a>01985       <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a> = distance;
<a name="l01986"></a>01986       <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a> = normal;
<a name="l01987"></a>01987       <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>.Normalize();
<a name="l01988"></a>01988     }
<a name="l01989"></a>01989 
<a name="l01990"></a><a class="code" href="classr3_1_1Plane.html#a9fbd408e89717c66c3ee4d2f087f870e">01990</a>     <a class="code" href="classr3_1_1Plane.html#a9fbd408e89717c66c3ee4d2f087f870e">Plane</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;normal, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;point ) {
<a name="l01991"></a>01991       <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a> = normal;
<a name="l01992"></a>01992       <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>.Normalize();
<a name="l01993"></a>01993       <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a> = point.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(<a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>);
<a name="l01994"></a>01994     }
<a name="l01995"></a>01995 
<a name="l01996"></a><a class="code" href="classr3_1_1Plane.html#ad4d1c01d521cf26d963fe0368b334eaa">01996</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Plane.html#ad4d1c01d521cf26d963fe0368b334eaa">Offset</a>( T d ) {
<a name="l01997"></a>01997       <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a> += d;
<a name="l01998"></a>01998     }
<a name="l01999"></a>01999 
<a name="l02000"></a><a class="code" href="classr3_1_1Plane.html#ab3e0767c73986c5684a138418231b0cb">02000</a>     <span class="keywordtype">bool</span> <a class="code" href="classr3_1_1Plane.html#ab3e0767c73986c5684a138418231b0cb">Intersect</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Line.html">Line&lt;T&gt;</a> &amp;l, <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;intersection )<span class="keyword"> const </span>{
<a name="l02001"></a>02001       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> pos, dir;
<a name="l02002"></a>02002       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> pn = <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>;
<a name="l02003"></a>02003       T pd = <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a>;
<a name="l02004"></a>02004 
<a name="l02005"></a>02005       pos = l.<a class="code" href="classr3_1_1Line.html#a7b344f8e352995b2c54fbbe904054ec7">GetPosition</a>();
<a name="l02006"></a>02006       dir = l.<a class="code" href="classr3_1_1Line.html#af321fca9a4f6956c0fa3905cb9ed74ee">GetDirection</a>();
<a name="l02007"></a>02007 
<a name="l02008"></a>02008       <span class="keywordflow">if</span>(dir.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(pn) == 0.0) <span class="keywordflow">return</span> 0;
<a name="l02009"></a>02009       pos -= pn*pd;
<a name="l02010"></a>02010       <span class="comment">// now we&#39;re talking about a Plane passing through the origin</span>
<a name="l02011"></a>02011       <span class="keywordflow">if</span>(pos.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(pn) &lt; 0.0) pn.<a class="code" href="classr3_1_1Vec3.html#a159a0655a4716a3675d349bc9cd2d21c">Negate</a>();
<a name="l02012"></a>02012       <span class="keywordflow">if</span>(dir.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(pn) &gt; 0.0) dir.<a class="code" href="classr3_1_1Vec3.html#a159a0655a4716a3675d349bc9cd2d21c">Negate</a>();
<a name="l02013"></a>02013       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> ppos = pn * pos.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(pn);
<a name="l02014"></a>02014       pos = (ppos.<a class="code" href="classr3_1_1Vec3.html#a10db8a730f86d0af930920a9de02581c">Length</a>()/dir.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(-pn))*dir;
<a name="l02015"></a>02015       intersection = l.<a class="code" href="classr3_1_1Line.html#a7b344f8e352995b2c54fbbe904054ec7">GetPosition</a>();
<a name="l02016"></a>02016       intersection += pos;
<a name="l02017"></a>02017       <span class="keywordflow">return</span> 1;
<a name="l02018"></a>02018     }
<a name="l02019"></a>02019 
<a name="l02020"></a><a class="code" href="classr3_1_1Plane.html#a6ec322f19a27769a6686d4409366dda5">02020</a>     <span class="keywordtype">void</span> <a class="code" href="classr3_1_1Plane.html#a6ec322f19a27769a6686d4409366dda5">Transform</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> &amp;matrix ) {
<a name="l02021"></a>02021       <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> invtr = matrix.<a class="code" href="classr3_1_1Matrix4.html#a73493f0f5477529cd7796c074f25bae8">Inverse</a>();
<a name="l02022"></a>02022       invtr = invtr.<a class="code" href="classr3_1_1Matrix4.html#a8de183ed5608c55ce7c2d05455e26b72">Transpose</a>();
<a name="l02023"></a>02023 
<a name="l02024"></a>02024       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> pntOnPlane = <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a> * <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a>;
<a name="l02025"></a>02025       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> newPntOnPlane;
<a name="l02026"></a>02026       <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> newnormal;
<a name="l02027"></a>02027 
<a name="l02028"></a>02028       invtr.<a class="code" href="classr3_1_1Matrix4.html#a9506bc8c3ce70d10dc6823d2996d56f1">MultDirMatrix</a>(<a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>, newnormal);
<a name="l02029"></a>02029       matrix.<a class="code" href="classr3_1_1Matrix4.html#a3443b00a982261ccad3f3f42b8efd6e2">MultVecMatrix</a>(pntOnPlane, newPntOnPlane);
<a name="l02030"></a>02030 
<a name="l02031"></a>02031       newnormal.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l02032"></a>02032       <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a> = newnormal;
<a name="l02033"></a>02033       planedistance = newPntOnPlane.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(<a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>);
<a name="l02034"></a>02034     }
<a name="l02035"></a>02035 
<a name="l02036"></a><a class="code" href="classr3_1_1Plane.html#adef9b2d8c8bcf18a74993c75071b91e1">02036</a>     <span class="keywordtype">bool</span> <a class="code" href="classr3_1_1Plane.html#adef9b2d8c8bcf18a74993c75071b91e1">IsInHalfSpace</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;point )<span class="keyword"> const </span>{
<a name="l02037"></a>02037 
<a name="l02038"></a>02038       <span class="keywordflow">if</span>(( point.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(<a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>) - <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a>) &lt; 0.0)
<a name="l02039"></a>02039         <span class="keywordflow">return</span> 0;
<a name="l02040"></a>02040       <span class="keywordflow">return</span> 1;
<a name="l02041"></a>02041     }
<a name="l02042"></a>02042 
<a name="l02043"></a>02043 
<a name="l02044"></a><a class="code" href="classr3_1_1Plane.html#ae19f17992d63f58b2f8da441dc7f8c97">02044</a>     T <a class="code" href="classr3_1_1Plane.html#ae19f17992d63f58b2f8da441dc7f8c97">Distance</a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; point )<span class="keyword"> const </span>{
<a name="l02045"></a>02045       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>.Dot(point - <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>*<a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a>);
<a name="l02046"></a>02046     }
<a name="l02047"></a>02047 
<a name="l02048"></a><a class="code" href="classr3_1_1Plane.html#a705a1715653a7c977198b08aae0c1dfb">02048</a>     <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;<a class="code" href="classr3_1_1Plane.html#a705a1715653a7c977198b08aae0c1dfb">GetNormal</a>()<span class="keyword"> const </span>{
<a name="l02049"></a>02049       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>;
<a name="l02050"></a>02050     }
<a name="l02051"></a>02051 
<a name="l02052"></a>02052 
<a name="l02053"></a><a class="code" href="classr3_1_1Plane.html#af358e7b36043a516baa4a1759c16bf85">02053</a>     T <a class="code" href="classr3_1_1Plane.html#af358e7b36043a516baa4a1759c16bf85">GetDistanceFromOrigin</a>()<span class="keyword"> const </span>{
<a name="l02054"></a>02054       <span class="keywordflow">return</span> <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a>;
<a name="l02055"></a>02055     }
<a name="l02056"></a>02056 
<a name="l02057"></a>02057 
<a name="l02058"></a>02058 
<a name="l02059"></a>02059     <span class="comment">//protected:</span>
<a name="l02060"></a><a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">02060</a>     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>;
<a name="l02061"></a><a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">02061</a>     T <a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a>;
<a name="l02062"></a>02062   };
<a name="l02063"></a>02063 
<a name="l02064"></a>02064   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02065"></a><a class="code" href="namespacer3.html#acd801da57761d7357aa179ac4bfc09a0">02065</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#a8615485ea001c58af7cb1d6b1ee612c8">operator == </a>(<span class="keyword">const</span> <a class="code" href="classr3_1_1Plane.html">Plane&lt;T&gt;</a> &amp; p1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Plane.html">Plane&lt;T&gt;</a> &amp; p2 ) {
<a name="l02066"></a>02066     <span class="keywordflow">return</span> (  p1.<a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a> == p2.<a class="code" href="classr3_1_1Plane.html#aa09154c055e33b0437c51dc3708fa64a">planedistance</a> &amp;&amp; p1.<a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a> == p2.<a class="code" href="classr3_1_1Plane.html#a774580394abed64b743e7483a0ec5b41">planenormal</a>);
<a name="l02067"></a>02067   }
<a name="l02068"></a>02068 
<a name="l02069"></a>02069   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02070"></a><a class="code" href="namespacer3.html#a63c179d7d3a07cf84b8a60d8cf204949">02070</a>   <span class="keywordtype">bool</span> <a class="code" href="namespacer3.html#ad7488bc006398d5a428b892f93be6f78">operator != </a>( <span class="keyword">const</span> <a class="code" href="classr3_1_1Plane.html">Plane&lt;T&gt;</a> &amp; p1, <span class="keyword">const</span> <a class="code" href="classr3_1_1Plane.html">Plane&lt;T&gt;</a> &amp; p2 ) {
<a name="l02071"></a>02071     <span class="keywordflow">return</span>  ! (p1 == p2);
<a name="l02072"></a>02072   }
<a name="l02073"></a>02073 
<a name="l02074"></a>02074 
<a name="l02075"></a>02075 
<a name="l02076"></a>02076 
<a name="l02077"></a>02077 
<a name="l02078"></a>02078 
<a name="l02079"></a>02079   <span class="comment">// some useful constructors / functions</span>
<a name="l02080"></a>02080 
<a name="l02081"></a>02081     <span class="comment">// inverse of camera_lookat</span>
<a name="l02082"></a>02082   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02083"></a><a class="code" href="namespacer3.html#a657289d73125323f14984e45b3aff1b7">02083</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a657289d73125323f14984e45b3aff1b7">ObjectLookAt</a>(<span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; from, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; to, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; Up)
<a name="l02084"></a>02084     {
<a name="l02085"></a>02085         <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> look = to - from;
<a name="l02086"></a>02086         look.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l02087"></a>02087         <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> up(Up);
<a name="l02088"></a>02088         up -= look * look.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(up);
<a name="l02089"></a>02089         up.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l02090"></a>02090 
<a name="l02091"></a>02091         <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> r( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(0,0,-1), <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(0,1,0), look, up);
<a name="l02092"></a>02092         <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> m;
<a name="l02093"></a>02093         r.<a class="code" href="classr3_1_1Quaternion.html#afbe55513e93480471af1e6641ffdbb93">GetValue</a>(m);
<a name="l02094"></a>02094         m.<a class="code" href="classr3_1_1Matrix4.html#a47c82e876cb2ce3dbc3d77c82d874c69">SetTranslate</a>(from);
<a name="l02095"></a>02095         <span class="keywordflow">return</span> m;
<a name="l02096"></a>02096     }
<a name="l02097"></a>02097 
<a name="l02098"></a>02098     <span class="comment">// inverse of object_lookat</span>
<a name="l02099"></a>02099   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02100"></a><a class="code" href="namespacer3.html#a3b7e60d486b9c976830cdc0dfbba2fc1">02100</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a3b7e60d486b9c976830cdc0dfbba2fc1">CameraLookAt</a>(<span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; eye, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; lookpoint, <span class="keyword">const</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp; Up)
<a name="l02101"></a>02101     {
<a name="l02102"></a>02102         <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> look = lookpoint - eye;
<a name="l02103"></a>02103         look.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l02104"></a>02104         <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> up(Up);
<a name="l02105"></a>02105         up -= look * look.<a class="code" href="classr3_1_1Vec3.html#ab7df58500d6a6ae48304d8bfaa7e6f7a">Dot</a>(up);
<a name="l02106"></a>02106         up.<a class="code" href="classr3_1_1Vec3.html#a7217487c6ab6b56054f29cbedd8380e6">Normalize</a>();
<a name="l02107"></a>02107 
<a name="l02108"></a>02108         <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> t;
<a name="l02109"></a>02109         t.<a class="code" href="classr3_1_1Matrix4.html#a47c82e876cb2ce3dbc3d77c82d874c69">SetTranslate</a>(-eye);
<a name="l02110"></a>02110 
<a name="l02111"></a>02111         <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;T&gt;</a> r( <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(0,0,-1), <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>(0,1,0), look, up);
<a name="l02112"></a>02112         r.<a class="code" href="classr3_1_1Quaternion.html#a3cfd462f2007c86aa26ff61a5624e1d2">Invert</a>();
<a name="l02113"></a>02113         <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> rm;
<a name="l02114"></a>02114         r.<a class="code" href="classr3_1_1Quaternion.html#afbe55513e93480471af1e6641ffdbb93">GetValue</a>(rm);
<a name="l02115"></a>02115         <span class="keywordflow">return</span> rm * t;
<a name="l02116"></a>02116     }
<a name="l02117"></a>02117 
<a name="l02118"></a>02118 
<a name="l02119"></a>02119 
<a name="l02120"></a>02120   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02121"></a><a class="code" href="namespacer3.html#af8d06d3f80bc51b250e14dbc6a2df63d">02121</a>   <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#af8d06d3f80bc51b250e14dbc6a2df63d">Frustum</a>( T left, T right, T bottom, T top, T zNear, T zFar )
<a name="l02122"></a>02122     {
<a name="l02123"></a>02123         <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> m;
<a name="l02124"></a>02124         m.<a class="code" href="classr3_1_1Matrix4.html#af10460f28946816ef32e178e0e781182">MakeIdentity</a>();
<a name="l02125"></a>02125 
<a name="l02126"></a>02126         m(0,0) = (2*zNear) / (right - left);
<a name="l02127"></a>02127         m(0,2) = (right + left) / (right - left);
<a name="l02128"></a>02128 
<a name="l02129"></a>02129         m(1,1) = (2*zNear) / (top - bottom);
<a name="l02130"></a>02130         m(1,2) = (top + bottom) / (top - bottom);
<a name="l02131"></a>02131 
<a name="l02132"></a>02132         m(2,2) = -(zFar + zNear) / (zFar - zNear);
<a name="l02133"></a>02133         m(2,3) = -2*zFar*zNear / (zFar - zNear);
<a name="l02134"></a>02134 
<a name="l02135"></a>02135         m(3,2) = -1;
<a name="l02136"></a>02136         m(3,3) = 0;
<a name="l02137"></a>02137 
<a name="l02138"></a>02138         <span class="keywordflow">return</span> m;
<a name="l02139"></a>02139     }
<a name="l02140"></a>02140 
<a name="l02141"></a>02141   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02142"></a><a class="code" href="namespacer3.html#a64a64d77d8dad39db09d40fae19ada82">02142</a>   <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a64a64d77d8dad39db09d40fae19ada82">FrustumInverse</a>( T left, T right, T bottom, T top, T zNear, T zFar)
<a name="l02143"></a>02143     {
<a name="l02144"></a>02144         <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> m;
<a name="l02145"></a>02145         m.<a class="code" href="classr3_1_1Matrix4.html#af10460f28946816ef32e178e0e781182">MakeIdentity</a>();
<a name="l02146"></a>02146 
<a name="l02147"></a>02147         m(0,0) = (right - left) / (2 * zNear);
<a name="l02148"></a>02148         m(0,3) = (right + left) / (2 * zNear);
<a name="l02149"></a>02149 
<a name="l02150"></a>02150         m(1,1) = (top - bottom) / (2 * zNear);
<a name="l02151"></a>02151         m(1,3) = (top + bottom) / (2 * zNear);
<a name="l02152"></a>02152 
<a name="l02153"></a>02153         m(2,2) = 0;
<a name="l02154"></a>02154         m(2,3) = -1;
<a name="l02155"></a>02155 
<a name="l02156"></a>02156         m(3,2) = -(zFar - zNear) / (2 * zFar * zNear);
<a name="l02157"></a>02157         m(3,3) = (zFar + zNear) / (2 * zFar * zNear);
<a name="l02158"></a>02158 
<a name="l02159"></a>02159         <span class="keywordflow">return</span> m;
<a name="l02160"></a>02160     }
<a name="l02161"></a>02161 
<a name="l02162"></a>02162   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02163"></a><a class="code" href="namespacer3.html#ad4f084af3e144fcbf4eeae3137953576">02163</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#ad4f084af3e144fcbf4eeae3137953576">Perspective</a>( T fovy, T aspect, T zNear, T zFar)
<a name="l02164"></a>02164     {
<a name="l02165"></a>02165         T tangent = (T)tan(<a class="code" href="namespacer3.html#aac7de211930b1a3db073bf02559cc187">ToRadians</a>(fovy/T(2.0)));
<a name="l02166"></a>02166         T y = tangent * zNear;
<a name="l02167"></a>02167         T x = aspect * y;
<a name="l02168"></a>02168         <span class="keywordflow">return</span> <a class="code" href="namespacer3.html#af8d06d3f80bc51b250e14dbc6a2df63d">Frustum</a>(-x, x, -y, y, zNear, zFar);
<a name="l02169"></a>02169     }
<a name="l02170"></a>02170 
<a name="l02171"></a>02171   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02172"></a><a class="code" href="namespacer3.html#a1f78ed964b9811b2608ddf87ec1f7b45">02172</a>     <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a1f78ed964b9811b2608ddf87ec1f7b45">PerspectiveInverse</a>( T fovy, T aspect, T zNear, T zFar)
<a name="l02173"></a>02173     {
<a name="l02174"></a>02174         T tangent = (T)tan(<a class="code" href="namespacer3.html#aac7de211930b1a3db073bf02559cc187">ToRadians</a>(fovy/T(2.0)));
<a name="l02175"></a>02175         T y = tangent * zNear;
<a name="l02176"></a>02176         T x = aspect * y;
<a name="l02177"></a>02177         <span class="keywordflow">return</span> <a class="code" href="namespacer3.html#a64a64d77d8dad39db09d40fae19ada82">FrustumInverse</a>(-x, x, -y, y, zNear, zFar);
<a name="l02178"></a>02178     }
<a name="l02179"></a>02179 
<a name="l02180"></a>02180   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02181"></a><a class="code" href="namespacer3.html#a9051b5636897bbf42b0ce6d9b403270f">02181</a>   <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a9051b5636897bbf42b0ce6d9b403270f">Ortho</a>( T left, T right, T bottom, T top, T zNear, T zFar ) {
<a name="l02182"></a>02182     <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> m;
<a name="l02183"></a>02183     <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a> s( 1 / ( right - left ), 1 / ( top - bottom ), -1 / ( zFar - zNear ) );
<a name="l02184"></a>02184     m.<a class="code" href="classr3_1_1Matrix4.html#a7730f2f12ae5d2c4779a8c8a8c59349c">SetScale</a>( s * T(2) );
<a name="l02185"></a>02185     m.<a class="code" href="classr3_1_1Matrix4.html#a47c82e876cb2ce3dbc3d77c82d874c69">SetTranslate</a>( s * <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;T&gt;</a>( -( right + left ), -( top + bottom ), zFar + zNear ) );
<a name="l02186"></a>02186     <span class="keywordflow">return</span> m;
<a name="l02187"></a>02187   }
<a name="l02188"></a>02188 
<a name="l02189"></a>02189   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>
<a name="l02190"></a><a class="code" href="namespacer3.html#a2aa240f719eed9cad585a76513b4b285">02190</a>   <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> <a class="code" href="namespacer3.html#a2aa240f719eed9cad585a76513b4b285">OrthoInverse</a>( T left, T right, T bottom, T top, T zNear, T zFar ) {
<a name="l02191"></a>02191     <span class="comment">// could be done with a formula, but I&#39;m being lazy</span>
<a name="l02192"></a>02192     <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;T&gt;</a> m = <a class="code" href="namespacer3.html#a9051b5636897bbf42b0ce6d9b403270f">Ortho</a>( left, right, bottom, top, zNear, zFar );
<a name="l02193"></a>02193     <span class="keywordflow">return</span> m.<a class="code" href="classr3_1_1Matrix4.html#a73493f0f5477529cd7796c074f25bae8">Inverse</a>();
<a name="l02194"></a>02194   }
<a name="l02195"></a>02195 
<a name="l02196"></a>02196 
<a name="l02197"></a>02197 
<a name="l02198"></a>02198   <span class="comment">// make common typedefs...</span>
<a name="l02199"></a><a class="code" href="namespacer3.html#aef3636ca6b32c39f035ae9e3b3d15159">02199</a>   <span class="keyword">typedef</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;int&gt;</a> <a class="code" href="namespacer3.html#aef3636ca6b32c39f035ae9e3b3d15159">Vec2i</a>;
<a name="l02200"></a><a class="code" href="namespacer3.html#a540ace76682cd8ac85bae43f9fbb4ed8">02200</a>   <span class="keyword">typedef</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;float&gt;</a> <a class="code" href="namespacer3.html#a540ace76682cd8ac85bae43f9fbb4ed8">Vec2f</a>;
<a name="l02201"></a><a class="code" href="namespacer3.html#a2ad75c54e29d222a3c139674809d8b50">02201</a>   <span class="keyword">typedef</span> <a class="code" href="structr3_1_1Vec2.html">Vec2&lt;double&gt;</a> <a class="code" href="namespacer3.html#a2ad75c54e29d222a3c139674809d8b50">Vec2d</a>;
<a name="l02202"></a><a class="code" href="namespacer3.html#a1154fb3a66783034d42836d3db01015d">02202</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;int&gt;</a> <a class="code" href="namespacer3.html#a1154fb3a66783034d42836d3db01015d">Vec3i</a>;
<a name="l02203"></a><a class="code" href="namespacer3.html#ab08445415b9bf0755ffec78d09ea2bea">02203</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;float&gt;</a> <a class="code" href="namespacer3.html#ab08445415b9bf0755ffec78d09ea2bea">Vec3f</a>;
<a name="l02204"></a><a class="code" href="namespacer3.html#a7c8d4fd56a4fb332b908a76e6d019edb">02204</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Vec3.html">Vec3&lt;double&gt;</a> <a class="code" href="namespacer3.html#a7c8d4fd56a4fb332b908a76e6d019edb">Vec3d</a>;
<a name="l02205"></a><a class="code" href="namespacer3.html#a78c5c567d0dd2d6146a7a30f304382cb">02205</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;float&gt;</a>  <a class="code" href="namespacer3.html#a78c5c567d0dd2d6146a7a30f304382cb">Vec4f</a>;
<a name="l02206"></a><a class="code" href="namespacer3.html#a56b8b5ef5c085368f6062c6af1b741a6">02206</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;double&gt;</a> <a class="code" href="namespacer3.html#a56b8b5ef5c085368f6062c6af1b741a6">Vec4d</a>;
<a name="l02207"></a><a class="code" href="namespacer3.html#a29e969eb46c6ba59d9dfb7febc9cd1dd">02207</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt;int&gt;</a> <a class="code" href="namespacer3.html#a29e969eb46c6ba59d9dfb7febc9cd1dd">Vec4i</a>;
<a name="l02208"></a><a class="code" href="namespacer3.html#a74677e3562e3a071e328776dca1dc33d">02208</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Vec4.html">Vec4&lt; unsigned char &gt;</a> <a class="code" href="namespacer3.html#a74677e3562e3a071e328776dca1dc33d">Vec4ub</a>;
<a name="l02209"></a><a class="code" href="namespacer3.html#aba63ec09d229455dec645f31d709ea38">02209</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;float&gt;</a>  <a class="code" href="namespacer3.html#aba63ec09d229455dec645f31d709ea38">Quaternionf</a>;
<a name="l02210"></a><a class="code" href="namespacer3.html#a81a49af3b1cbbe00963686698be281ac">02210</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;double&gt;</a>  <a class="code" href="namespacer3.html#a81a49af3b1cbbe00963686698be281ac">Quaterniond</a>;
<a name="l02211"></a><a class="code" href="namespacer3.html#a7b09cfc1f05af0cf22501fae24e98e17">02211</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;float&gt;</a>  <a class="code" href="namespacer3.html#a7b09cfc1f05af0cf22501fae24e98e17">Rotationf</a>;
<a name="l02212"></a><a class="code" href="namespacer3.html#af607cdafc476af57cbe255b21382f0e9">02212</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Quaternion.html">Quaternion&lt;double&gt;</a>  <a class="code" href="namespacer3.html#af607cdafc476af57cbe255b21382f0e9">Rotationd</a>;
<a name="l02213"></a><a class="code" href="namespacer3.html#ab64737ad1e42ff91b909a95aa51c6c4d">02213</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Line.html">Line&lt;float&gt;</a>  <a class="code" href="namespacer3.html#ab64737ad1e42ff91b909a95aa51c6c4d">Linef</a>;
<a name="l02214"></a><a class="code" href="namespacer3.html#aced786eb434cdc5c4d0da06ffa5db96c">02214</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Line.html">Line&lt;double&gt;</a>  <a class="code" href="namespacer3.html#aced786eb434cdc5c4d0da06ffa5db96c">Lined</a>;
<a name="l02215"></a><a class="code" href="namespacer3.html#a60c9ff03643c2c7a070ab4917b091dcf">02215</a>   <span class="keyword">typedef</span> <a class="code" href="structr3_1_1LineSegment2.html">LineSegment2&lt;float&gt;</a>  <a class="code" href="namespacer3.html#a60c9ff03643c2c7a070ab4917b091dcf">LineSegment2f</a>;
<a name="l02216"></a><a class="code" href="namespacer3.html#a81853745e288608f93ff263ddba152d4">02216</a>   <span class="keyword">typedef</span> <a class="code" href="structr3_1_1LineSegment2.html">LineSegment2&lt;double&gt;</a>  <a class="code" href="namespacer3.html#a81853745e288608f93ff263ddba152d4">LineSegment2d</a>;
<a name="l02217"></a><a class="code" href="namespacer3.html#a006682203137e8ac72a5fbab1d700edf">02217</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Plane.html">Plane&lt;float&gt;</a>  <a class="code" href="namespacer3.html#a006682203137e8ac72a5fbab1d700edf">Planef</a>;
<a name="l02218"></a><a class="code" href="namespacer3.html#a1d80fa42e098ef76bb5db819f841dc23">02218</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Plane.html">Plane&lt;double&gt;</a>  <a class="code" href="namespacer3.html#a1d80fa42e098ef76bb5db819f841dc23">Planed</a>;
<a name="l02219"></a><a class="code" href="namespacer3.html#a9533bff7bbbd39f24ff753e51d117d1c">02219</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;float&gt;</a> <a class="code" href="namespacer3.html#a9533bff7bbbd39f24ff753e51d117d1c">Matrix3f</a>;
<a name="l02220"></a><a class="code" href="namespacer3.html#ad6c8c590d284703dc131b33d7335d272">02220</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;double&gt;</a> <a class="code" href="namespacer3.html#ad6c8c590d284703dc131b33d7335d272">Matrix3d</a>;
<a name="l02221"></a><a class="code" href="namespacer3.html#a109a024398eefdc30dfb407a99b26f00">02221</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Matrix3.html">Matrix3&lt;int&gt;</a> <a class="code" href="namespacer3.html#a109a024398eefdc30dfb407a99b26f00">Matrix3i</a>;
<a name="l02222"></a><a class="code" href="namespacer3.html#a23f98636e59bebbd9131baf5e6193a28">02222</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;float&gt;</a>  <a class="code" href="namespacer3.html#a23f98636e59bebbd9131baf5e6193a28">Matrix4f</a>;
<a name="l02223"></a><a class="code" href="namespacer3.html#aa489930055c9320875be1f6f3524b372">02223</a>   <span class="keyword">typedef</span> <a class="code" href="classr3_1_1Matrix4.html">Matrix4&lt;double&gt;</a>  <a class="code" href="namespacer3.html#aa489930055c9320875be1f6f3524b372">Matrix4d</a>;
<a name="l02224"></a>02224 
<a name="l02225"></a>02225 }  <span class="comment">// namespace r3</span>
<a name="l02226"></a>02226 
<a name="l02227"></a>02227 <a class="code" href="RegalNamespace_8h.html#a199ebe7354e38f29e5a03cc66523ccac">REGAL_NAMESPACE_END</a>
<a name="l02228"></a>02228 
<a name="l02229"></a>02229 <span class="preprocessor">#endif</span>
<a name="l02230"></a>02230 <span class="preprocessor"></span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 19 2013 18:19:17 for Regal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
